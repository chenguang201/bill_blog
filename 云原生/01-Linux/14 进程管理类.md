**<font style="color:#DF2A3F;">笔记来源：</font>**[**<font style="color:#DF2A3F;">3天搞定Linux，1天搞定Shell，清华学神带你通关</font>**](https://www.bilibili.com/video/BV1WY4y1H7d3?p=9&vd_source=e8046ccbdc793e09a75eb61fe8e84a30)

**<font style="color:#000000;"></font>**

<font style="color:#000000;">进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地</font>**<font style="color:#000000;">址空间，并占用一定的系统资源。  					</font>**

# 597. <font style="color:#000000;">1 ps </font>
<font style="color:#000000;">查看当前系统进程状态 </font>

<font style="color:#000000;">ps：process status 进程状态 </font>

<font style="color:#000000;">基本语法</font>

```powershell
ps aux | grep xxx  #(功能描述:查看系统中所有进程) 
ps -ef | grep xxx  #(功能描述:可以查看子父进程之间的关系)  		
```

<font style="color:#000000;">选项说明 </font>

+ `<font style="color:#000000;">a</font>`<font style="color:#000000;">：</font><font style="color:#000000;">列出带有终端的所有用户的进程 </font>
+ `<font style="color:#000000;">x</font>`<font style="color:#000000;">：</font><font style="color:#000000;">列出当前用户的所有进程，包括没有终端的进程 </font>
+ `<font style="color:#000000;">u</font>`<font style="color:#000000;">：</font><font style="color:#000000;">面向用户友好的显示风格	</font>
+ `<font style="color:#000000;">-e</font>`<font style="color:#000000;">：</font><font style="color:#000000;">列出所有进程 </font>
+ `<font style="color:#000000;">-u</font>`<font style="color:#000000;">：</font><font style="color:#000000;">列出某个用户关联的所有进程 </font>
+ `<font style="color:#000000;">-f</font>`<font style="color:#000000;">： 显示完整格式的进程列表  </font>

<font style="color:#000000;">功能说明</font>

+ `<font style="color:#000000;">ps aux</font>`<font style="color:#000000;"> 显示信息说明</font>
    - <font style="color:#000000;">USER：该进程是由哪个用户产生的</font>
    - <font style="color:#000000;">PID：进程的 ID 号</font>
    - <font style="color:#000000;">%CPU：该进程占用 CPU 资源的百分比，占用越高，进程越耗费资源; </font>
    - <font style="color:#000000;">%MEM：该进程占用物理内存的百分比，占用越高，进程越耗费资源; </font>
    - <font style="color:#000000;">VSZ：该进程占用虚拟内存的大小，单位 KB; </font>
    - <font style="color:#000000;">RSS：该进程占用实际物理内存的大小，单位 KB; </font>
    - <font style="color:#000000;">TTY：该进程是在哪个终端中运行的。对于 CentOS 来说，tty1 是图形化终端，tty2-tty6 是本地的字符界面终端。pts/0-255 代表虚拟终端。 </font>
    - <font style="color:#000000;">STAT：进程状态。常见的状态有：</font>
        * `<font style="color:#000000;">R</font>`<font style="color:#000000;">：运行状态、</font>
        * `<font style="color:#000000;">S</font>`<font style="color:#000000;">：睡眠状态、</font>
        * `<font style="color:#000000;">T</font>`<font style="color:#000000;">：暂停状态、</font>
        * `<font style="color:#000000;">Z</font>`<font style="color:#000000;">：僵尸状态、</font>
        * `<font style="color:#000000;">s</font>`<font style="color:#000000;">：包含子进程、</font>
        * `<font style="color:#000000;">l</font>`<font style="color:#000000;">：多线程、</font>
        * `<font style="color:#000000;">+</font>`<font style="color:#000000;">：前台显示 </font>
    - <font style="color:#000000;">START：该进程的启动时间</font>
    - <font style="color:#000000;">TIME：该进程占用 CPU 的运算时间，注意不是系统时间 </font>
    - <font style="color:#000000;">COMMAND：产生此进程的命令名 </font>
+ `<font style="color:#000000;">ps -ef</font>`<font style="color:#000000;"> 显示信息说明 </font>
    - <font style="color:#000000;">UID：用户 ID</font>
    - <font style="color:#000000;">PID：进程 ID</font>
    - <font style="color:#000000;">PPID：父进程 ID</font>
    - <font style="color:#000000;">C：CPU 用于计算执行优先级的因子。数值越大，表明进程是 CPU 密集型运算， 执行优先级会降低;数值越小，表明进程是 I/O 密集型运算，执行优先级会提高 </font>
    - <font style="color:#000000;">STIME：进程启动的时间 </font>
    - <font style="color:#000000;">TTY：完整的终端名称 </font>
    - <font style="color:#000000;">TIME：CPU 时间</font>
    - <font style="color:#000000;">CMD：启动进程所用的命令和参数 </font>

<font style="color:#000000;">经验技巧：如果想查看进程的 CPU 占用率和内存占用率，可以使用 aux; 如果想查看进程的父进程 ID 可以使用 ef; </font>

<font style="color:#000000;">案例实操</font>

```powershell
#查看进程的 CPU 占用率和内存占用率
ps aux

#查看进程的父进程 ID
ps -ef 
```

# 598. <font style="color:#000000;">2 kill </font>
<font style="color:#000000;">终止进程 </font>

<font style="color:#000000;">基本语法 </font>

```powershell
kill [选项] 进程号 #(功能描述:通过进程号杀死进程) 
 					
killall 进程名称 #(功能描述:通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用) 
```

<font style="color:#000000;">选项说明 </font>

+ `<font style="color:#000000;">-9</font>`<font style="color:#000000;"> 表示强迫进程立即停止 </font>

**<font style="color:#000000;"></font>**<font style="color:#000000;">案例实操 </font>

```powershell
#(1)杀死浏览器进程
kill -9 5102 
 					
#(2)通过进程名称杀死进程
killall firefox 
```

# 599. <font style="color:#000000;">3 pstree </font>
<font style="color:#000000;">查看进程树 </font>

<font style="color:#000000;">基本语法</font>

```powershell
pstree [选项]
```

<font style="color:#000000;">选项说明 </font>

+ `<font style="color:#000000;">-p</font>`<font style="color:#000000;">：显示进程的 PID </font>
+ `<font style="color:#000000;">-u</font>`<font style="color:#000000;">：显示进程的所属用户 </font>

**<font style="color:#000000;"></font>**<font style="color:#000000;">案例实操 </font>

```powershell
#(1)显示进程 pid 
pstree -p 
 					
#(2)显示进程所属用户 
pstree -u 
```

# 600. <font style="color:#000000;">4 top </font>
<font style="color:#000000;">实时监控系统进程状态 </font>

<font style="color:#000000;">基本命令 </font>

```powershell
top [选项]
```

<font style="color:#000000;">选项说明</font>

+ `-d 秒数`<font style="color:#000000;">：指定 top 命令每隔几秒更新。默认是 3 秒在 top 命令的交互模式当中可以执行的命令</font>
+ `<font style="color:#000000;">-i</font>`<font style="color:#000000;">：使 top 不显示任何闲置或者僵死进程。 </font>
+ `<font style="color:#000000;">-p</font>`<font style="color:#000000;"> 通过指定监控进程 ID 来仅仅监控某个进程的状态。 </font>

**<font style="color:#000000;"></font>**<font style="color:#000000;">操作说明 </font>

+ `<font style="color:#000000;">P</font>`<font style="color:#000000;">：以 CPU 使用率排序，默认就是此项 </font>
+ `<font style="color:#000000;">M</font>`<font style="color:#000000;">：以内存的使用率排序 </font>**<font style="color:#000000;"> 						</font>**
+ `<font style="color:#000000;">N</font>`<font style="color:#000000;">：以PID排序</font>
+ `<font style="color:#000000;">q</font>`<font style="color:#000000;">：退出top </font>

**<font style="color:#000000;"> 				</font>**

<font style="color:#000000;">查询结果字段解释</font>

![](images/48.png)

<font style="color:#000000;">第一行信息为任务队列信息 </font>

+ `<font style="color:#000000;">12:26:4</font>`<font style="color:#000000;">系统当前时间</font>
+ `<font style="color:#000000;">up 1 day, 13:32</font>`<font style="color:#000000;">系统的运行时间，本机已经运行 1 天 13小时32分钟</font>
+ `<font style="color:#000000;">2 users</font>`<font style="color:#000000;">当前登录了两个用户</font>
+ `<font style="color:#000000;">load average: 0.00, 0.00, 0.00</font>`<font style="color:#000000;">系统在之前 1 分钟，5 分钟，15 分钟的平均负 载。一般认为小于 1 时，负载较小。如果大于 1，系统已经超出负荷。 </font>

**<font style="color:#000000;"> 	</font>**<font style="color:#000000;">  
</font><font style="color:#000000;">第二行为进程信息 </font>

+ `<font style="color:#000000;">Tasks: 95 total</font>`<font style="color:#000000;">系统中的进程总数 </font>
+ `<font style="color:#000000;">1 running</font>`<font style="color:#000000;">正在运行的进程数</font>
+ `<font style="color:#000000;">94 sleeping</font>`<font style="color:#000000;">睡眠的进程</font>
+ `<font style="color:#000000;">0 stopped</font>`<font style="color:#000000;"> 正在停止的进程</font>
+ `<font style="color:#000000;">0 zombie</font>`<font style="color:#000000;">僵尸进程。如果不是 0，需要手工检查僵尸进程 </font>

**<font style="color:#000000;"> 		</font>**<font style="color:#000000;">  
</font><font style="color:#000000;">第三行为 CPU 信息 </font>**<font style="color:#000000;">		</font>**

+ `<font style="color:#000000;">Cpu(s): 0.1%us</font>`<font style="color:#000000;">用户模式占用的CPU百分比 </font>
+ `<font style="color:#000000;">0.1%sy</font>`<font style="color:#000000;">系统模式占用的 CPU 百分比</font>
+ `<font style="color:#000000;">0.0%ni</font>`<font style="color:#000000;">改变过优先级的用户进程占用的 CPU 百分比</font>
+ `<font style="color:#000000;">99.7%id</font>`<font style="color:#000000;">空闲 CPU 的 CPU 百分比</font>
+ `<font style="color:#000000;">0.1%wa</font>`<font style="color:#000000;">等待输入/输出的进程的占用 CPU 百分比</font>
+ `<font style="color:#000000;">0.0%hi</font>`<font style="color:#000000;">硬中断请求服务占用的 CPU 百分比</font>
+ `<font style="color:#000000;">0.1%si</font>`<font style="color:#000000;"> 软中断请求服务占用的 CPU 百分比 </font>
+ `<font style="color:#000000;">0.0%st</font>`<font style="color:#000000;">st(Steal time)虚拟时间百分比。就是当有虚拟 机时，虚拟 CPU 等待实际 CPU 的时间百分比。 </font>

**<font style="color:#000000;"> 				</font>**

<font style="color:#000000;">第四行为物理内存信息 </font>

+ `<font style="color:#000000;">Mem: 625344k total</font>`<font style="color:#000000;">物理内存的总量，单位 KB </font>
+ `<font style="color:#000000;">571504k used</font>`<font style="color:#000000;">已经使用的物理内存数量</font>
+ `<font style="color:#000000;">53840k free</font>`<font style="color:#000000;"> 空闲的物理内存数量，我们使用的是虚拟机，总 共只分配了 628MB 内存，所以只有 53MB 的空 闲内存了</font>
+ `<font style="color:#000000;">65800k buffers</font>`<font style="color:#000000;">作为缓冲的内存数量 </font>

<font style="color:#000000;"></font>

<font style="color:#000000;">第五行为交换分区(swap)信息 </font>

+ `<font style="color:#000000;">Swap: 524280k total</font>`<font style="color:#000000;">交换分区(虚拟内存)的总大小</font>
+ `<font style="color:#000000;">0k used</font>`<font style="color:#000000;">已经使用的交互分区的大小</font>
+ `<font style="color:#000000;">524280k free</font>`<font style="color:#000000;"> </font><font style="color:#000000;">空闲交换分区的大小</font>
+ `<font style="color:#000000;">409280k cached</font>`<font style="color:#000000;"> 作为缓存的交互分区的大小 </font>

**<font style="color:#000000;"> 				</font>**

<font style="color:#000000;">案例实操</font>

```powershell
top -d 1 
top -i 
top -p 2575  
```

<font style="color:#000000;">执行上述命令后，可以按 P、M、N 对查询出的进程结果进行排序。 </font>

# 601. <font style="color:#000000;">5 netstat </font>
<font style="color:#000000;">显示网络状态和端口占用信息 </font>

<font style="color:#000000;">基本语法 </font>

```powershell
netstat -anp | grep 进程号  #(功能描述:查看该进程网络信息)
netstat –nlp | grep 端口号  #(功能描述:查看网络端口号占用情况) 
```

**<font style="color:#000000;">				</font>**

<font style="color:#000000;">选项说明 </font>

+ `<font style="color:#000000;">-a</font>`<font style="color:#000000;">：显示所有正在监听（listen）和未监听的套接字（socket） </font>
+ `<font style="color:#000000;">-n</font>`<font style="color:#000000;">：拒绝显示别名，能显示数字的全部转化成数字</font>
+ `<font style="color:#000000;">-l</font>`<font style="color:#000000;">：仅列出在监听的服务状态</font>
+ `<font style="color:#000000;">-p</font>`<font style="color:#000000;">：表示显示哪个进程在调用 </font>

<font style="color:#000000;">案例实操</font>

```powershell
#(1)通过进程号查看sshd进程的网络信息
netstat -anp | grep sshd

#(2)查看某端口号是否被占用 
netstat -nltp | grep 22
```

<font style="color:#000000;"> </font>

