# 9. <font style="color:rgb(51,51,51);">1 å…¥é—¨ </font>
<font style="color:rgb(51,51,51);">æ¥ç€ç±»æ–‡ä»¶ç»“æ„çš„å†…å®¹ï¼Œç ”ç©¶ä¸€ä¸‹ä¸¤ç»„å­—èŠ‚ç æŒ‡ä»¤ï¼Œä¸€ä¸ªæ˜¯</font>`<font style="color:rgb(51,51,51);">public cn.itcast.jvm.t5.HelloWorld();</font>`<font style="color:rgb(51,51,51);">æ„é€ æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤</font>

```plain
2a b7 00 01 b1 
```

1. <font style="color:rgb(51,51,51);">2a => </font>_<font style="color:rgb(51,51,51);">aload_0 </font>_<font style="color:rgb(51,51,51);">åŠ è½½ slot 0 çš„å±€éƒ¨å˜é‡ï¼Œå³ thisï¼Œåšä¸ºä¸‹é¢çš„ </font>_<font style="color:rgb(51,51,51);">invokespecial</font>_<font style="color:rgb(51,51,51);">æ„é€ æ–¹æ³•è°ƒç”¨çš„å‚æ•° </font>
2. <font style="color:rgb(51,51,51);">b7 => </font>_<font style="color:rgb(51,51,51);">invokespecial</font>_<font style="color:rgb(51,51,51);">é¢„å¤‡è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå“ªä¸ªæ–¹æ³•å‘¢ï¼Ÿ </font>
3. <font style="color:rgb(51,51,51);">00 01 å¼•ç”¨å¸¸é‡æ± ä¸­ #1 é¡¹ï¼Œå³ã€ Method java/lang/Object."<init>":()V ã€‘ </font>
4. <font style="color:rgb(51,51,51);">b1 è¡¨ç¤ºè¿”å› </font>

<font style="color:rgb(51,51,51);">å¦ä¸€ä¸ªæ˜¯</font>`<font style="color:rgb(51,51,51);">public static void main(java.lang.String[]);</font>`<font style="color:rgb(51,51,51);">ä¸»æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤ </font>

```plain
b2 00 02 12 03 b6 00 04 b1 
```

1. <font style="color:rgb(51,51,51);">b2 => </font>_<font style="color:rgb(51,51,51);">getstatic</font>_<font style="color:rgb(51,51,51);">ç”¨æ¥åŠ è½½é™æ€å˜é‡ï¼Œå“ªä¸ªé™æ€å˜é‡å‘¢ï¼Ÿ </font>
2. <font style="color:rgb(51,51,51);">00 02 å¼•ç”¨å¸¸é‡æ± ä¸­ #2 é¡¹ï¼Œå³ã€Field java/lang/System.out:Ljava/io/PrintStream;ã€‘ </font>
3. <font style="color:rgb(51,51,51);">12 => </font>_<font style="color:rgb(51,51,51);">ldc </font>_<font style="color:rgb(51,51,51);">åŠ è½½å‚æ•°ï¼Œå“ªä¸ªå‚æ•°å‘¢ï¼Ÿ </font>
4. <font style="color:rgb(51,51,51);">03 å¼•ç”¨å¸¸é‡æ± ä¸­ #3 é¡¹ï¼Œå³ ã€String hello worldã€‘ </font>
5. <font style="color:rgb(51,51,51);">b6 => </font>_<font style="color:rgb(51,51,51);">invokevirtual</font>_<font style="color:rgb(51,51,51);">é¢„å¤‡è°ƒç”¨æˆå‘˜æ–¹æ³•ï¼Œå“ªä¸ªæ–¹æ³•å‘¢ï¼Ÿ </font>
6. <font style="color:rgb(51,51,51);">00 04 å¼•ç”¨å¸¸é‡æ± ä¸­ #4 é¡¹ï¼Œå³ã€Method java/io/PrintStream.println:(Ljava/lang/String;)Vã€‘ </font>
7. <font style="color:rgb(51,51,51);">b1 è¡¨ç¤ºè¿”å› </font>

<font style="color:rgb(51,51,51);">è¯·å‚è€ƒ </font>

[https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5)

# 10. <font style="color:rgb(51,51,51);">2 javap å·¥å…· </font>
<font style="color:rgb(51,51,51);">è‡ªå·±åˆ†æç±»æ–‡ä»¶ç»“æ„å¤ªéº»çƒ¦äº†ï¼ŒOracle æä¾›äº† javap å·¥å…·æ¥åç¼–è¯‘ class æ–‡ä»¶ </font>

```bash
javap -v F:\Thread_study\src\com
yima\JVM\day01\Main.class
```

```java
F:\Thread_study>javap -v F:\Thread_study\src\com
yima\JVM\day5\Demo1.class
Classfile /F:/Thread_study/src/com/nyima/JVM/day5/Demo1.class
  Last modified 2020-6-6; size 434 bytes
  MD5 checksum df1dce65bf6fb0b4c1de318051f4a67e
  Compiled from "Demo1.java"
public class com.nyima.JVM.day5.Demo1
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #6.#15         // java/lang/Object."<init>":()V
   #2 = Fieldref           #16.#17        // java/lang/System.out:Ljava/io/PrintStream;
   #3 = String             #18            // hello world
   #4 = Methodref          #19.#20        // java/io/PrintStream.println:(Ljava/lang/String;)V
   #5 = Class              #21            // com/nyima/JVM/day5/Demo1
   #6 = Class              #22            // java/lang/Object
   #7 = Utf8               <init>
   #8 = Utf8               ()V
   #9 = Utf8               Code
  #10 = Utf8               LineNumberTable
  #11 = Utf8               main
  #12 = Utf8               ([Ljava/lang/String;)V
  #13 = Utf8               SourceFile
  #14 = Utf8               Demo1.java
  #15 = NameAndType        #7:#8          // "<init>":()V
  #16 = Class              #23            // java/lang/System
  #17 = NameAndType        #24:#25        // out:Ljava/io/PrintStream;
  #18 = Utf8               hello world
  #19 = Class              #26            // java/io/PrintStream
  #20 = NameAndType        #27:#28        // println:(Ljava/lang/String;)V
  #21 = Utf8               com/nyima/JVM/day5/Demo1
  #22 = Utf8               java/lang/Object
  #23 = Utf8               java/lang/System
  #24 = Utf8               out
  #25 = Utf8               Ljava/io/PrintStream;
  #26 = Utf8               java/io/PrintStream
  #27 = Utf8               println
  #28 = Utf8               (Ljava/lang/String;)V
{
  public com.nyima.JVM.day5.Demo1();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 7: 0

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=1, args_size=1
         0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
         3: ldc           #3                  // String hello world
         5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V

         8: return
      LineNumberTable:
        line 9: 0
        line 10: 8
}
```

# 11. <font style="color:rgb(51,51,51);">3 å›¾è§£æ–¹æ³•æ‰§è¡Œæµç¨‹ </font>
**<font style="color:rgb(51,51,51);">1</font>****<font style="color:rgb(51,51,51);">ï¼‰åŸå§‹</font>****<font style="color:rgb(51,51,51);"> java </font>****<font style="color:rgb(51,51,51);">ä»£ç  </font>**

```java
package cn.itcast.jvm.t3.bytecode; 
/** 
* æ¼”ç¤º å­—èŠ‚ç æŒ‡ä»¤ å’Œ æ“ä½œæ•°æ ˆã€å¸¸é‡æ± çš„å…³ç³» 
*/ 
public class Demo3_1 { 
    public static void main(String[] args) { 
        int a = 10; 
        int b = Short.MAX_VALUE + 1; 
        int c = a + b; 
        System.out.println(c); 
    } 
} 
```

**<font style="color:rgb(51,51,51);">2</font>****<font style="color:rgb(51,51,51);">ï¼‰ç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶ </font>**

```java
E:\code\testdemo-springcloud\eureka-server\src\test\java\cn\itcast\jvm\t3\bytecode>javap -v Demo3_1.class
Classfile /E:/code/testdemo-springcloud/eureka-server/src/test/java/cn/itcast/jvm/t3/bytecode/Demo3_1.class
  Last modified 2022-10-25; size 458 bytes
  MD5 checksum edffe805e9a12f64914f29ea61c5e055
  Compiled from "Demo3_1.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_1
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #7.#16         // java/lang/Object."<init>":()V
   #2 = Class              #17            // java/lang/Short
   #3 = Integer            32768
   #4 = Fieldref           #18.#19        // java/lang/System.out:Ljava/io/PrintStream;
   #5 = Methodref          #20.#21        // java/io/PrintStream.println:(I)V
   #6 = Class              #22            // cn/itcast/jvm/t3/bytecode/Demo3_1
   #7 = Class              #23            // java/lang/Object
   #8 = Utf8               <init>
   #9 = Utf8               ()V
  #10 = Utf8               Code
  #11 = Utf8               LineNumberTable
  #12 = Utf8               main
  #13 = Utf8               ([Ljava/lang/String;)V
  #14 = Utf8               SourceFile
  #15 = Utf8               Demo3_1.java
  #16 = NameAndType        #8:#9          // "<init>":()V
  #17 = Utf8               java/lang/Short
  #18 = Class              #24            // java/lang/System
  #19 = NameAndType        #25:#26        // out:Ljava/io/PrintStream;
  #20 = Class              #27            // java/io/PrintStream
  #21 = NameAndType        #28:#29        // println:(I)V
  #22 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_1
  #23 = Utf8               java/lang/Object
  #24 = Utf8               java/lang/System
  #25 = Utf8               out
  #26 = Utf8               Ljava/io/PrintStream;
  #27 = Utf8               java/io/PrintStream
  #28 = Utf8               println
  #29 = Utf8               (I)V
{
  public cn.itcast.jvm.t3.bytecode.Demo3_1();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=4, args_size=1
         0: bipush        10
         2: istore_1
         3: ldc           #3                  // int 32768
         5: istore_2
         6: iload_1
         7: iload_2
         8: iadd
         9: istore_3
        10: getstatic     #4                  // Field java/lang/System.out:Ljava/io/PrintStream;
        13: iload_3
        14: invokevirtual #5                  // Method java/io/PrintStream.println:(I)V
        17: return
      LineNumberTable:
        line 5: 0
        line 6: 3
        line 7: 6
        line 8: 10
        line 9: 17
}
```

**<font style="color:rgb(51,51,51);">3ï¼‰å¸¸é‡æ± è½½å…¥è¿è¡Œæ—¶å¸¸é‡æ±  </font>**

![](images/265.png)

**<font style="color:rgb(51,51,51);">4</font>****<font style="color:rgb(51,51,51);">ï¼‰æ–¹æ³•å­—èŠ‚ç è½½å…¥æ–¹æ³•åŒº </font>**

![](images/266.png)

**<font style="color:rgb(51,51,51);">5</font>****<font style="color:rgb(51,51,51);">ï¼‰</font>****<font style="color:rgb(51,51,51);">main </font>****<font style="color:rgb(51,51,51);">çº¿ç¨‹å¼€å§‹è¿è¡Œï¼Œåˆ†é…æ ˆå¸§å†…å­˜ </font>**

<font style="color:rgb(51,51,51);">ï¼ˆ</font><font style="color:rgb(51,51,51);">stack=2</font><font style="color:rgb(51,51,51);">ï¼Œ</font><font style="color:rgb(51,51,51);">locals=4</font><font style="color:rgb(51,51,51);">ï¼‰ </font>

![](images/267.png)

**<font style="color:rgb(51,51,51);">6ï¼‰æ‰§è¡Œå¼•æ“å¼€å§‹æ‰§è¡Œå­—èŠ‚ç  </font>**

**<font style="color:rgb(51,51,51);">bipush 10 </font>**

+ <font style="color:rgb(51,51,51);">å°†ä¸€ä¸ª byte å‹å…¥æ“ä½œæ•°æ ˆï¼ˆå…¶é•¿åº¦ä¼šè¡¥é½ 4 ä¸ªå­—èŠ‚ï¼‰ï¼Œç±»ä¼¼çš„æŒ‡ä»¤è¿˜æœ‰ </font>
+ <font style="color:rgb(51,51,51);">sipush å°†ä¸€ä¸ª short å‹å…¥æ“ä½œæ•°æ ˆï¼ˆå…¶é•¿åº¦ä¼šè¡¥é½ 4 ä¸ªå­—èŠ‚ï¼‰ </font>
+ <font style="color:rgb(51,51,51);">ldc å°†ä¸€ä¸ª int å‹å…¥æ“ä½œæ•°æ ˆ </font>
+ <font style="color:rgb(51,51,51);">ldc2_w å°†ä¸€ä¸ª long å‹å…¥æ“ä½œæ•°æ ˆï¼ˆåˆ†ä¸¤æ¬¡å‹å…¥ï¼Œå› ä¸º long æ˜¯ 8 ä¸ªå­—èŠ‚ï¼‰ </font>
+ <font style="color:rgb(51,51,51);">è¿™é‡Œå°çš„æ•°å­—éƒ½æ˜¯å’Œå­—èŠ‚ç æŒ‡ä»¤å­˜åœ¨ä¸€èµ·ï¼Œè¶…è¿‡ short èŒƒå›´çš„æ•°å­—å­˜å…¥äº†å¸¸é‡æ±  </font>

![](images/268.png)

**<font style="color:rgb(51,51,51);">istore_1 </font>**

+ <font style="color:rgb(51,51,51);">å°†æ“ä½œæ•°æ ˆé¡¶æ•°æ®å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 1</font>

![](images/269.png)



**<font style="color:rgb(51,51,51);">ldc #3 </font>**

+ <font style="color:rgb(51,51,51);">ä»å¸¸é‡æ± åŠ è½½ #3 æ•°æ®åˆ°æ“ä½œæ•°æ ˆ </font>
+ **<font style="color:rgb(51,51,51);">æ³¨æ„</font>**<font style="color:rgb(51,51,51);"> Short.MAX_VALUE æ˜¯ 32767ï¼Œæ‰€ä»¥ 32768 = Short.MAX_VALUE + 1 å®é™…æ˜¯åœ¨ç¼–è¯‘æœŸé—´è®¡ç®—å¥½çš„ </font>

![](images/270.png)

**<font style="color:rgb(51,51,51);">istore_2</font>**

![](images/271.png)

**<font style="color:rgb(51,51,51);">iload_1 </font>**

![](images/272.png)

**<font style="color:rgb(51,51,51);">iload_2</font>**

![](images/273.png)

**<font style="color:rgb(51,51,51);">iadd </font>**

![](images/274.png)

**<font style="color:rgb(51,51,51);">istore_3</font>**

![](images/275.png)

**<font style="color:rgb(51,51,51);">getstatic #4</font>**

![](images/276.png)

![](images/277.png)

**<font style="color:rgb(51,51,51);">iload_3 </font>**

![](images/278.png)

**<font style="color:rgb(51,51,51);">invokevirtual #5 </font>**

+ <font style="color:rgb(51,51,51);">æ‰¾åˆ°å¸¸é‡æ±  #5 é¡¹ </font>
+ <font style="color:rgb(51,51,51);">å®šä½åˆ°æ–¹æ³•åŒº java/io/PrintStream.println:(I)V æ–¹æ³• </font>
+ <font style="color:rgb(51,51,51);">ç”Ÿæˆæ–°çš„æ ˆå¸§ï¼ˆåˆ†é… localsã€stackç­‰ï¼‰ </font>
+ <font style="color:rgb(51,51,51);">ä¼ é€’å‚æ•°ï¼Œæ‰§è¡Œæ–°æ ˆå¸§ä¸­çš„å­—èŠ‚ç </font>

![](images/279.png)

+ <font style="color:rgb(51,51,51);">æ‰§è¡Œå®Œæ¯•ï¼Œå¼¹å‡ºæ ˆå¸§ </font>
+ <font style="color:rgb(51,51,51);">æ¸…é™¤ main æ“ä½œæ•°æ ˆå†…å®¹ </font>

![](images/280.png)

**<font style="color:rgb(51,51,51);">return </font>**

+ <font style="color:rgb(51,51,51);">å®Œæˆ main æ–¹æ³•è°ƒç”¨ï¼Œå¼¹å‡º main æ ˆå¸§ </font>
+ <font style="color:rgb(51,51,51);">ç¨‹åºç»“æŸ</font>



# 12. <font style="color:rgb(51,51,51);">4 ç»ƒä¹ ï¼šåˆ†æ i++ </font>
<font style="color:rgb(51,51,51);">ç›®çš„ï¼šä»å­—èŠ‚ç è§’åº¦åˆ†æ </font><font style="color:rgb(51,51,51);">a++ </font><font style="color:rgb(51,51,51);">ç›¸å…³é¢˜ç›® </font>

<font style="color:rgb(51,51,51);">æºç ï¼š </font>

```java
package cn.itcast.jvm.t3.bytecode; 
/** 
* ä»å­—èŠ‚ç è§’åº¦åˆ†æ a++ ç›¸å…³é¢˜ç›® 
*/ 
public class Demo3_2 { 
    public static void main(String[] args) { 
        int a = 10; 
        int b = a++ + ++a + a--; 
        System.out.println(a); 
        System.out.println(b); 
    } 
} 
```

<font style="color:rgb(51,51,51);">å­—èŠ‚ç ï¼š </font>

```java
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_2.class 
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_2.class
  Last modified 2022å¹´10æœˆ26æ—¥; size 447 bytes
  SHA-256 checksum 3c4201a9717927e924cf3cb5bdffb889e4d459a4ce66ef8229ed8ec1adce2c45
  Compiled from "Demo3_2.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_2
  minor version: 0
  major version: 61
  flags: (0x0021) ACC_PUBLIC, ACC_SUPER
  this_class: #19                         // cn/itcast/jvm/t3/bytecode/Demo3_2
  super_class: #2                         // java/lang/Object
  interfaces: 0, fields: 0, methods: 2, attributes: 1
Constant pool:
   #1 = Methodref          #2.#3          // java/lang/Object."<init>":()V
   #2 = Class              #4             // java/lang/Object
   #3 = NameAndType        #5:#6          // "<init>":()V
   #4 = Utf8               java/lang/Object
   #5 = Utf8               <init>
   #6 = Utf8               ()V
   #7 = Fieldref           #8.#9          // java/lang/System.out:Ljava/io/PrintStream;
   #8 = Class              #10            // java/lang/System
   #9 = NameAndType        #11:#12        // out:Ljava/io/PrintStream;
  #10 = Utf8               java/lang/System
  #11 = Utf8               out
  #12 = Utf8               Ljava/io/PrintStream;
  #13 = Methodref          #14.#15        // java/io/PrintStream.println:(I)V
  #14 = Class              #16            // java/io/PrintStream
  #15 = NameAndType        #17:#18        // println:(I)V
  #16 = Utf8               java/io/PrintStream
  #17 = Utf8               println
  #18 = Utf8               (I)V
  #19 = Class              #20            // cn/itcast/jvm/t3/bytecode/Demo3_2
  #20 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_2
  #21 = Utf8               Code
  #22 = Utf8               LineNumberTable
  #23 = Utf8               main
  #24 = Utf8               ([Ljava/lang/String;)V
  #25 = Utf8               SourceFile
  #26 = Utf8               Demo3_2.java
{
  public cn.itcast.jvm.t3.bytecode.Demo3_2();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=3, args_size=1
         0: bipush        10
         2: istore_1
         3: iload_1
         4: iinc          1, 1
         7: iinc          1, 1
        10: iload_1
        11: iadd
        12: iload_1
        13: iinc          1, -1
        16: iadd
        17: istore_2
        18: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;
        21: iload_1
        22: invokevirtual #13                 // Method java/io/PrintStream.println:(I)V
        25: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;
        28: iload_2
        29: invokevirtual #13                 // Method java/io/PrintStream.println:(I)V
        32: return
      LineNumberTable:
        line 5: 0
        line 6: 3
        line 7: 18
        line 8: 25
        line 9: 32
}
```

<font style="color:rgb(51,51,51);">åˆ†æï¼š </font>

+ <font style="color:rgb(51,51,51);">æ³¨æ„ iinc æŒ‡ä»¤æ˜¯ç›´æ¥åœ¨å±€éƒ¨å˜é‡ slot ä¸Šè¿›è¡Œè¿ç®— </font>
+ <font style="color:rgb(51,51,51);">a++ å’Œ ++a çš„åŒºåˆ«æ˜¯å…ˆæ‰§è¡Œ iload è¿˜æ˜¯ å…ˆæ‰§è¡Œ iinc</font>

![](images/281.png)

![](images/282.png)

![](images/283.png)

![](images/284.png)

![](images/285.png)

![](images/286.png)

![](images/287.png)

![](images/288.png)

![](images/289.png)

![](images/290.png)

![](images/291.png)

# 13. <font style="color:rgb(51,51,51);">5 æ¡ä»¶åˆ¤æ–­æŒ‡ä»¤</font>
| <font style="color:rgb(51,51,51);">æŒ‡ä»¤ </font> | **<font style="color:rgb(51,51,51);">åŠ©è®°ç¬¦ </font>** | **<font style="color:rgb(51,51,51);">å«ä¹‰ </font>** |
| --- | --- | --- |
| <font style="color:rgb(51,51,51);">0x99 </font> | <font style="color:rgb(51,51,51);">ifeq </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ == 0 </font> |
| <font style="color:rgb(51,51,51);">0x9a </font> | <font style="color:rgb(51,51,51);">ifne </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ != 0 </font> |
| <font style="color:rgb(51,51,51);">0x9b </font> | <font style="color:rgb(51,51,51);">iflt </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ < 0 </font> |
| <font style="color:rgb(51,51,51);">0x9c </font> | <font style="color:rgb(51,51,51);">ifge </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ >= 0 </font> |
| <font style="color:rgb(51,51,51);">0x9d </font> | <font style="color:rgb(51,51,51);">ifgt </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ > 0 </font> |
| <font style="color:rgb(51,51,51);">0x9e </font> | <font style="color:rgb(51,51,51);">ifle </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ <= 0 </font> |
| <font style="color:rgb(51,51,51);">0x9f </font> | <font style="color:rgb(51,51,51);">if_icmpeq </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªintæ˜¯å¦ == </font> |
| <font style="color:rgb(51,51,51);">0xa0 </font> | <font style="color:rgb(51,51,51);">if_icmpne </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªintæ˜¯å¦ != </font> |
| <font style="color:rgb(51,51,51);">0xa1 </font> | <font style="color:rgb(51,51,51);">if_icmplt </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªintæ˜¯å¦ < </font> |
| <font style="color:rgb(51,51,51);">0xa2 </font> | <font style="color:rgb(51,51,51);">if_icmpge </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªintæ˜¯å¦ >= </font> |
| <font style="color:rgb(51,51,51);">0xa3 </font> | <font style="color:rgb(51,51,51);">if_icmpgt </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªintæ˜¯å¦ > </font> |
| <font style="color:rgb(51,51,51);">0xa4 </font> | <font style="color:rgb(51,51,51);">if_icmple </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªintæ˜¯å¦ <= </font> |
| <font style="color:rgb(51,51,51);">0xa5 </font> | <font style="color:rgb(51,51,51);">if_acmpeq </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªå¼•ç”¨æ˜¯å¦ == </font> |
| <font style="color:rgb(51,51,51);">0xa6 </font> | <font style="color:rgb(51,51,51);">if_acmpne </font> | <font style="color:rgb(51,51,51);">ä¸¤ä¸ªå¼•ç”¨æ˜¯å¦ != </font> |
| <font style="color:rgb(51,51,51);">0xc6 </font> | <font style="color:rgb(51,51,51);">ifnull </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ == null </font> |
| <font style="color:rgb(51,51,51);">0xc7 </font> | <font style="color:rgb(51,51,51);">ifnonnull </font> | <font style="color:rgb(51,51,51);">åˆ¤æ–­æ˜¯å¦ != null </font> |


<font style="color:rgb(51,51,51);">å‡ ç‚¹è¯´æ˜ï¼š </font>

+ <font style="color:rgb(51,51,51);">byteï¼Œshortï¼Œchar éƒ½ä¼šæŒ‰ int æ¯”è¾ƒï¼Œå› ä¸ºæ“ä½œæ•°æ ˆéƒ½æ˜¯ 4 å­—èŠ‚ </font>
+ <font style="color:rgb(51,51,51);">goto ç”¨æ¥è¿›è¡Œè·³è½¬åˆ°æŒ‡å®šè¡Œå·çš„å­—èŠ‚ç  </font>

<font style="color:rgb(51,51,51);">æºç ï¼š </font>

```java
public class Demo3_3 { 
    public static void main(String[] args) { 
        int a = 0; 
        if(a == 0) { 
            a = 10; 
        } else { 
            a = 20; 
        } 
    } 
}
```

<font style="color:rgb(51,51,51);">å­—èŠ‚ç ï¼š </font>

```java
 0: iconst_0 
 1: istore_1 
 2: iload_1 
 3: ifne 		12 
 6: bipush 		10 
 8: istore_1 
 9: goto 		15 
12: bipush 		20 
14: istore_1 
15: return 
```

<font style="color:rgb(119,119,119);">æ€è€ƒ </font>

<font style="color:rgb(119,119,119);">ç»†å¿ƒçš„åŒå­¦åº”å½“æ³¨æ„åˆ°ï¼Œä»¥ä¸Šæ¯”è¾ƒæŒ‡ä»¤ä¸­æ²¡æœ‰ longï¼Œflfloatï¼Œdouble çš„æ¯”è¾ƒï¼Œé‚£ä¹ˆå®ƒä»¬è¦æ¯”è¾ƒæ€ä¹ˆåŠï¼Ÿ </font>

<font style="color:rgb(119,119,119);">å‚è€ƒ </font><font style="color:rgb(65,131,196);">https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.lcmp </font>

# 14. <font style="color:rgb(51,51,51);">6 å¾ªç¯æ§åˆ¶æŒ‡ä»¤ </font>
<font style="color:rgb(51,51,51);">å…¶å®å¾ªç¯æ§åˆ¶è¿˜æ˜¯å‰é¢ä»‹ç»çš„é‚£äº›æŒ‡ä»¤ï¼Œä¾‹å¦‚</font><font style="color:rgb(51,51,51);"> while </font><font style="color:rgb(51,51,51);">å¾ªç¯ï¼š </font>

```java
public class Demo3_4 { 
    public static void main(String[] args) { 
        int a = 0; 
        while (a < 10) { 
            a++; 
        } 
    } 
} 
```

<font style="color:rgb(51,51,51);">å­—èŠ‚ç æ˜¯ï¼š </font>

```java
 0: iconst_0 
 1: istore_1 
 2: iload_1 
 3: bipush 		10 
 5: if_icmpge 	14 
 8: iinc 		1, 1 
11: goto 		2 
14: return 
```

<font style="color:rgb(51,51,51);">å†æ¯”å¦‚</font><font style="color:rgb(51,51,51);"> do while </font><font style="color:rgb(51,51,51);">å¾ªç¯ï¼š </font>

```java
public class Demo3_5 { 
    public static void main(String[] args) { 
        int a = 0; 
        do { 
            a++; 
        } while (a < 10); 
    } 
}
```

<font style="color:rgb(51,51,51);">å­—èŠ‚ç æ˜¯ï¼š </font>

```java
 0: iconst_0 
 1: istore_1 
 2: iinc 		1, 1 
 5: iload_1 
 6: bipush 		10 
 8: if_icmplt 	2 
11: return 
```

<font style="color:rgb(51,51,51);">æœ€åå†çœ‹çœ‹ for å¾ªç¯ï¼š </font>

```java
public class Demo3_6 { 
    public static void main(String[] args) { 
        for (int i = 0; i < 10; i++) { 
        } 
    } 
} 
```

<font style="color:rgb(51,51,51);">å­—èŠ‚ç æ˜¯ï¼š </font>

```java
 0: iconst_0 
 1: istore_1 
 2: iload_1 
 3: bipush 		10 
 5: if_icmpge 	14 
 8: iinc 		1, 1 
11: goto 		2 
14: return 
```

**<font style="color:rgb(119,119,119);">æ³¨æ„ </font>**

<font style="color:rgb(119,119,119);">æ¯”è¾ƒ while å’Œ for çš„å­—èŠ‚ç ï¼Œä½ å‘ç°å®ƒä»¬æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæ®Šé€”ä¹Ÿèƒ½åŒå½’</font>

# 15. <font style="color:rgb(51,51,51);">7 ç»ƒä¹  - åˆ¤æ–­ç»“æœ </font>
<font style="color:rgb(51,51,51);">è¯·ä»å­—èŠ‚ç è§’åº¦åˆ†æï¼Œä¸‹åˆ—ä»£ç è¿è¡Œçš„ç»“æœï¼š </font>

```java
public class Demo3_6_1 { 
    public static void main(String[] args) { 
        int i = 0; 
        int x = 0; 
        while (i < 10) { 
            x = x++; 
            i++; 
        } 
        System.out.println(x); // ç»“æœæ˜¯ 0 
    } 
}
```

å¯¹åº”å­—èŠ‚ç ï¼š

```java
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_6_1.class
  Last modified 2022å¹´10æœˆ26æ—¥; size 485 bytes
  SHA-256 checksum a58e9d6dcb3144646d9ad84dcd9dec2b8b895661892a6a4548c4ebade8552bbd
  Compiled from "Demo3_6_1.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_6_1
  minor version: 0
  major version: 61
  flags: (0x0021) ACC_PUBLIC, ACC_SUPER
  this_class: #19                         // cn/itcast/jvm/t3/bytecode/Demo3_6_1
  super_class: #2                         // java/lang/Object
  interfaces: 0, fields: 0, methods: 2, attributes: 1
Constant pool:
   #1 = Methodref          #2.#3          // java/lang/Object."<init>":()V
   #2 = Class              #4             // java/lang/Object
   #3 = NameAndType        #5:#6          // "<init>":()V
   #4 = Utf8               java/lang/Object
   #5 = Utf8               <init>
   #6 = Utf8               ()V
   #7 = Fieldref           #8.#9          // java/lang/System.out:Ljava/io/PrintStream;
   #8 = Class              #10            // java/lang/System
   #9 = NameAndType        #11:#12        // out:Ljava/io/PrintStream;
  #10 = Utf8               java/lang/System
  #11 = Utf8               out
  #12 = Utf8               Ljava/io/PrintStream;
  #13 = Methodref          #14.#15        // java/io/PrintStream.println:(I)V
  #14 = Class              #16            // java/io/PrintStream
  #15 = NameAndType        #17:#18        // println:(I)V
  #16 = Utf8               java/io/PrintStream
  #17 = Utf8               println
  #18 = Utf8               (I)V
  #19 = Class              #20            // cn/itcast/jvm/t3/bytecode/Demo3_6_1
  #20 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_6_1
  #21 = Utf8               Code
  #22 = Utf8               LineNumberTable
  #23 = Utf8               main
  #24 = Utf8               ([Ljava/lang/String;)V
  #25 = Utf8               StackMapTable
  #26 = Utf8               SourceFile
  #27 = Utf8               Demo3_6_1.java
{
  public cn.itcast.jvm.t3.bytecode.Demo3_6_1();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=3, args_size=1
         0: iconst_0
         1: istore_1
         2: iconst_0
         3: istore_2
         4: iload_1
         5: bipush        10
         7: if_icmpge     21
        10: iload_2					//æ­¤å¤„æ‹¿å‡ºæ¥çš„æ˜¯xä¸º0ï¼Œæ”¾åœ¨æ“ä½œæ•°æ ˆé‡Œ
        11: iinc          2, 1		//åœ¨å±€éƒ¨å˜é‡è¡¨é‡Œå¯¹xè¿›è¡Œè‡ªå¢æ“ä½œ
        14: istore_2				//å°†æ“ä½œæ•°æ ˆé‡Œçš„0è¦†ç›–åˆ°å±€éƒ¨å˜é‡è¡¨é‡Œçš„2å·æ§½ä½ï¼Œä¹Ÿå°±æ˜¯è¦†ç›–æ‰x++çš„å€¼ï¼Œæ‰€ä»¥xæ°¸è¿œä¼šä¸º0ï¼Œè¿™é‡Œä¹Ÿå°±ä½“ç°å‡ºx++æ˜¯å…ˆä½¿ç”¨ï¼Œå†åŠ åŠ 
        15: iinc          1, 1
        18: goto          4
        21: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;
        24: iload_2
        25: invokevirtual #13                 // Method java/io/PrintStream.println:(I)V
        28: return
      LineNumberTable:
        line 5: 0
        line 6: 2
        line 7: 4
        line 8: 10
        line 9: 15
        line 11: 21
        line 12: 28
      StackMapTable: number_of_entries = 2
        frame_type = 253 /* append */
          offset_delta = 4
          locals = [ int, int ]
        frame_type = 16 /* same */
}
SourceFile: "Demo3_6_1.java"
```

å¦‚æœæ˜¯`++x`å‘¢ï¼Ÿä»£ç å¦‚ä¸‹ï¼š

```java
package cn.itcast.jvm.t3.bytecode;

public class Demo3_6_1 {
    public static void main(String[] args) {
        int i = 0;
        int x = 0;
        while (i < 10) {
            x = ++x;  //æ­¤å¤„æ”¹ä¸º++x
            i++;
        }
        System.out.println(x); // ç»“æœæ˜¯ 10
    }
}
```

å¯¹åº”å­—èŠ‚ç å¦‚ä¸‹ï¼š

```java
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_6_1.class
  Last modified 2022å¹´10æœˆ26æ—¥; size 485 bytes
  SHA-256 checksum 3bd8d171feb413114a8352837e0ed9bdc1937515b1ece23d71205bc777b1e392
  Compiled from "Demo3_6_1.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_6_1
  minor version: 0
  major version: 61
  flags: (0x0021) ACC_PUBLIC, ACC_SUPER
  this_class: #19                         // cn/itcast/jvm/t3/bytecode/Demo3_6_1
  super_class: #2                         // java/lang/Object
  interfaces: 0, fields: 0, methods: 2, attributes: 1
Constant pool:
   #1 = Methodref          #2.#3          // java/lang/Object."<init>":()V
   #2 = Class              #4             // java/lang/Object
   #3 = NameAndType        #5:#6          // "<init>":()V
   #4 = Utf8               java/lang/Object
   #5 = Utf8               <init>
   #6 = Utf8               ()V
   #7 = Fieldref           #8.#9          // java/lang/System.out:Ljava/io/PrintStream;
   #8 = Class              #10            // java/lang/System
   #9 = NameAndType        #11:#12        // out:Ljava/io/PrintStream;
  #10 = Utf8               java/lang/System
  #11 = Utf8               out
  #12 = Utf8               Ljava/io/PrintStream;
  #13 = Methodref          #14.#15        // java/io/PrintStream.println:(I)V
  #14 = Class              #16            // java/io/PrintStream
  #15 = NameAndType        #17:#18        // println:(I)V
  #16 = Utf8               java/io/PrintStream
  #17 = Utf8               println
  #18 = Utf8               (I)V
  #19 = Class              #20            // cn/itcast/jvm/t3/bytecode/Demo3_6_1
  #20 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_6_1
  #21 = Utf8               Code
  #22 = Utf8               LineNumberTable
  #23 = Utf8               main
  #24 = Utf8               ([Ljava/lang/String;)V
  #25 = Utf8               StackMapTable
  #26 = Utf8               SourceFile
  #27 = Utf8               Demo3_6_1.java
{
  public cn.itcast.jvm.t3.bytecode.Demo3_6_1();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=3, args_size=1
         0: iconst_0
         1: istore_1
         2: iconst_0
         3: istore_2
         4: iload_1
         5: bipush        10
         7: if_icmpge     21
        10: iinc          2, 1			//å…ˆåœ¨å±€éƒ¨å˜é‡è¡¨é‡Œçš„2å·æ§½ä½è¿›è¡Œ++
        13: iload_2						//ç„¶åå°†å±€éƒ¨å˜é‡è¡¨é‡Œ2å·æ§½ä½çš„æ•°æ®åŠ è½½åˆ°æ“ä½œæ•°æ ˆé‡Œ
        14: istore_2					//å†å°†æ“ä½œæ•°æ ˆé‡Œæ•°æ®æ”¾åˆ°å±€éƒ¨å˜é‡è¡¨é‡Œ2å·æ§½ä½ï¼Œç›¸å½“äºæ•°æ®æ²¡åšæ”¹å˜
        15: iinc          1, 1
        18: goto          4
        21: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;
        24: iload_2
        25: invokevirtual #13                 // Method java/io/PrintStream.println:(I)V
        28: return
      LineNumberTable:
        line 5: 0
        line 6: 2
        line 7: 4
        line 8: 10
        line 9: 15
        line 11: 21
        line 12: 28
      StackMapTable: number_of_entries = 2
        frame_type = 253 /* append */
          offset_delta = 4
          locals = [ int, int ]
        frame_type = 16 /* same */
}
```

# 16. <font style="color:rgb(51,51,51);">8 æ„é€ æ–¹æ³• </font>
**<font style="color:rgb(51,51,51);">1ï¼‰ </font>**`**<font style="color:rgb(51,51,51);"><cinit>()V</font>**`

```java
public class Demo3_8_1 { 
    static int i = 10; 
    static { 
        i = 20; 
    } 
    static { 
        i = 30; 
    } 
} 
```

<font style="color:rgb(51,51,51);">ç¼–è¯‘å™¨ä¼šæŒ‰ä»ä¸Šè‡³ä¸‹çš„é¡ºåºï¼Œæ”¶é›†æ‰€æœ‰ static é™æ€ä»£ç å—å’Œé™æ€æˆå‘˜èµ‹å€¼çš„ä»£ç ï¼Œåˆå¹¶ä¸ºä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³• </font>`<font style="color:rgb(51,51,51);"><cinit>()V </font>`<font style="color:rgb(51,51,51);">ï¼š </font>

```java
 0: bipush 		10 
 2: putstatic 	#2 // Field i:I 
 5: bipush 		20 
 7: putstatic 	#2 // Field i:I 
10: bipush 		30 
12: putstatic 	#2 // Field i:I 
15: return 
```

`<font style="color:rgb(51,51,51);"><cinit>()V</font>`<font style="color:rgb(51,51,51);">æ–¹æ³•ä¼šåœ¨ç±»åŠ è½½çš„åˆå§‹åŒ–é˜¶æ®µè¢«è°ƒç”¨ </font>

**<font style="color:rgb(119,119,119);">ç»ƒä¹  </font>**

<font style="color:rgb(119,119,119);">åŒå­¦ä»¬å¯ä»¥è‡ªå·±è°ƒæ•´ä¸€ä¸‹</font><font style="color:rgb(119,119,119);"> static </font><font style="color:rgb(119,119,119);">å˜é‡å’Œé™æ€ä»£ç å—çš„ä½ç½®ï¼Œè§‚å¯Ÿå­—èŠ‚ç çš„æ”¹åŠ¨ </font>

<font style="color:rgb(119,119,119);"></font>

**<font style="color:rgb(51,51,51);">2ï¼‰</font>**`**<font style="color:rgb(51,51,51);"><init>()V</font>**`

```java
public class Demo3_8_2 { 
    private String a = "s1"; 
    
    { 
        b = 20; 
    } 
    
    private int b = 10; 
    
    { 
        a = "s2"; 
    }
    
    public Demo3_8_2(String a, int b) { 
        this.a = a; 
        this.b = b; 
    } 
    public static void main(String[] args) { 
        Demo3_8_2 d = new Demo3_8_2("s3", 30); 
        System.out.println(d.a); 
        System.out.println(d.b); 
    } 
} 
```

<font style="color:rgb(51,51,51);">ç¼–è¯‘å™¨ä¼šæŒ‰ä»ä¸Šè‡³ä¸‹çš„é¡ºåºï¼Œæ”¶é›†æ‰€æœ‰ {} ä»£ç å—å’Œæˆå‘˜å˜é‡èµ‹å€¼çš„ä»£ç ï¼Œå½¢æˆæ–°çš„æ„é€ æ–¹æ³•ï¼Œä½†åŸå§‹æ„é€ æ–¹æ³•å†…çš„ä»£ç æ€»æ˜¯åœ¨æœ€å </font>

```java
admin@admindeMacBook-Pro-4 bytecode % javac Demo3_8_2.java    
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_8_2.class 
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_8_2.class
  Last modified 2022å¹´10æœˆ26æ—¥; size 671 bytes
  SHA-256 checksum 00efef725c1ae306cf1bab08e2eb2bbd5a6b6f45fc1f6747e9b3b76cd3f0ec6c
  Compiled from "Demo3_8_2.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_8_2
  minor version: 0
  major version: 61
  flags: (0x0021) ACC_PUBLIC, ACC_SUPER
  this_class: #10                         // cn/itcast/jvm/t3/bytecode/Demo3_8_2
  super_class: #2                         // java/lang/Object
  interfaces: 0, fields: 2, methods: 2, attributes: 1
Constant pool:
   #1 = Methodref          #2.#3          // java/lang/Object."<init>":()V
   #2 = Class              #4             // java/lang/Object
   #3 = NameAndType        #5:#6          // "<init>":()V
   #4 = Utf8               java/lang/Object
   #5 = Utf8               <init>
   #6 = Utf8               ()V
   #7 = String             #8             // s1
   #8 = Utf8               s1
   #9 = Fieldref           #10.#11        // cn/itcast/jvm/t3/bytecode/Demo3_8_2.a:Ljava/lang/String;
  #10 = Class              #12            // cn/itcast/jvm/t3/bytecode/Demo3_8_2
  #11 = NameAndType        #13:#14        // a:Ljava/lang/String;
  #12 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_8_2
  #13 = Utf8               a
  #14 = Utf8               Ljava/lang/String;
  #15 = Fieldref           #10.#16        // cn/itcast/jvm/t3/bytecode/Demo3_8_2.b:I
  #16 = NameAndType        #17:#18        // b:I
  #17 = Utf8               b
  #18 = Utf8               I
  #19 = String             #20            // s2
  #20 = Utf8               s2
  #21 = String             #22            // s3
  #22 = Utf8               s3
  #23 = Methodref          #10.#24        // cn/itcast/jvm/t3/bytecode/Demo3_8_2."<init>":(Ljava/lang/String;I)V
  #24 = NameAndType        #5:#25         // "<init>":(Ljava/lang/String;I)V
  #25 = Utf8               (Ljava/lang/String;I)V
  #26 = Fieldref           #27.#28        // java/lang/System.out:Ljava/io/PrintStream;
  #27 = Class              #29            // java/lang/System
  #28 = NameAndType        #30:#31        // out:Ljava/io/PrintStream;
  #29 = Utf8               java/lang/System
  #30 = Utf8               out
  #31 = Utf8               Ljava/io/PrintStream;
  #32 = Methodref          #33.#34        // java/io/PrintStream.println:(Ljava/lang/String;)V
  #33 = Class              #35            // java/io/PrintStream
  #34 = NameAndType        #36:#37        // println:(Ljava/lang/String;)V
  #35 = Utf8               java/io/PrintStream
  #36 = Utf8               println
  #37 = Utf8               (Ljava/lang/String;)V
  #38 = Methodref          #33.#39        // java/io/PrintStream.println:(I)V
  #39 = NameAndType        #36:#40        // println:(I)V
  #40 = Utf8               (I)V
  #41 = Utf8               Code
  #42 = Utf8               LineNumberTable
  #43 = Utf8               main
  #44 = Utf8               ([Ljava/lang/String;)V
  #45 = Utf8               SourceFile
  #46 = Utf8               Demo3_8_2.java
{
  public cn.itcast.jvm.t3.bytecode.Demo3_8_2(java.lang.String, int);
    descriptor: (Ljava/lang/String;I)V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=2, locals=3, args_size=3
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: aload_0
         5: ldc           #7                  // String s1
         7: putfield      #9                  // Field a:Ljava/lang/String;
        10: aload_0
        11: bipush        20
        13: putfield      #15                 // Field b:I
        16: aload_0
        17: bipush        10
        19: putfield      #15                 // Field b:I
        22: aload_0
        23: ldc           #19                 // String s2
        25: putfield      #9                  // Field a:Ljava/lang/String;
        28: aload_0
        29: aload_1
        30: putfield      #9                  // Field a:Ljava/lang/String;
        33: aload_0
        34: iload_2
        35: putfield      #15                 // Field b:I
        38: return
      LineNumberTable:
        line 16: 0
        line 4: 4
        line 7: 10
        line 10: 16
        line 13: 22
        line 17: 28
        line 18: 33
        line 19: 38

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=4, locals=2, args_size=1
         0: new           #10                 // class cn/itcast/jvm/t3/bytecode/Demo3_8_2
         3: dup
         4: ldc           #21                 // String s3
         6: bipush        30
         8: invokespecial #23                 // Method "<init>":(Ljava/lang/String;I)V
        11: astore_1
        12: getstatic     #26                 // Field java/lang/System.out:Ljava/io/PrintStream;
        15: aload_1
        16: getfield      #9                  // Field a:Ljava/lang/String;
        19: invokevirtual #32                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        22: getstatic     #26                 // Field java/lang/System.out:Ljava/io/PrintStream;
        25: aload_1
        26: getfield      #15                 // Field b:I
        29: invokevirtual #38                 // Method java/io/PrintStream.println:(I)V
        32: return
      LineNumberTable:
        line 21: 0
        line 22: 12
        line 23: 22
        line 24: 32
}
```

# 17. <font style="color:rgb(51,51,51);">9 æ–¹æ³•è°ƒç”¨ </font>
<font style="color:rgb(51,51,51);">çœ‹ä¸€ä¸‹å‡ ç§ä¸åŒçš„æ–¹æ³•è°ƒç”¨å¯¹åº”çš„å­—èŠ‚ç æŒ‡ä»¤ </font>

```java
public class Demo3_9 { 
    public Demo3_9() { } 
    
    private void test1() { } 
    
    private final void test2() { } 
    
    public void test3() { } 
    
    public static void test4() { } 
    
    public static void main(String[] args) { 
        Demo3_9 d = new Demo3_9(); 
        d.test1(); 
        d.test2(); 
        d.test3(); 
        d.test4(); 
        Demo3_9.test4(); 
    } 
} 
```

<font style="color:rgb(51,51,51);">å­—èŠ‚ç ï¼š </font>

```java
 0: new 			#2 	// class cn/itcast/jvm/t3/bytecode/Demo3_9 
 3: dup 
 4: invokespecial 	#3 	// Method "<init>":()V 
 7: astore_1 
 8: aload_1 
 9: invokespecial 	#4 	// Method test1:()V 
12: aload_1 
13: invokespecial 	#5 	// Method test2:()V 
16: aload_1 
17: invokevirtual 	#6 	// Method test3:()V 
20: aload_1 
21: pop 
22: invokestatic 	#7 	// Method test4:()V 
25: invokestatic 	#7 	// Method test4:()V 
28: return
```

+ <font style="color:rgb(51,51,51);">new æ˜¯åˆ›å»ºã€å¯¹è±¡ã€‘ï¼Œç»™å¯¹è±¡åˆ†é…å †å†…å­˜ï¼Œæ‰§è¡ŒæˆåŠŸä¼šå°†ã€å¯¹è±¡å¼•ç”¨ã€‘å‹å…¥æ“ä½œæ•°æ ˆ </font>
+ <font style="color:rgb(51,51,51);">dup æ˜¯èµ‹å€¼æ“ä½œæ•°æ ˆæ ˆé¡¶çš„å†…å®¹ï¼Œæœ¬ä¾‹å³ä¸ºã€å¯¹è±¡å¼•ç”¨ã€‘ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä»½å¼•ç”¨å‘¢ï¼Œä¸€ä¸ªæ˜¯è¦é…åˆ invokespecial è°ƒç”¨è¯¥å¯¹è±¡çš„æ„é€ æ–¹æ³• </font>`<font style="color:rgb(51,51,51);">"<init>":()V</font>`<font style="color:rgb(51,51,51);">ï¼ˆä¼šæ¶ˆè€—æ‰æ ˆé¡¶ä¸€ä¸ªå¼•ç”¨ï¼‰ï¼Œå¦ä¸€ä¸ªè¦é…åˆ astore_1 èµ‹å€¼ç»™å±€éƒ¨å˜é‡ </font>
+ <font style="color:rgb(51,51,51);">æœ€ç»ˆæ–¹æ³•ï¼ˆfinalï¼‰ï¼Œç§æœ‰æ–¹æ³•ï¼ˆprivateï¼‰ï¼Œæ„é€ æ–¹æ³•éƒ½æ˜¯ç”± invokespecial æŒ‡ä»¤æ¥è°ƒç”¨ï¼Œå±äºé™æ€ç»‘å®š </font>
+ <font style="color:rgb(51,51,51);">æ™®é€šæˆå‘˜æ–¹æ³•æ˜¯ç”± invokevirtual è°ƒç”¨ï¼Œå±äºåŠ¨æ€ç»‘å®šï¼Œå³æ”¯æŒå¤šæ€ </font>
+ <font style="color:rgb(51,51,51);">æˆå‘˜æ–¹æ³•ä¸é™æ€æ–¹æ³•è°ƒç”¨çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œæ‰§è¡Œæ–¹æ³•å‰æ˜¯å¦éœ€è¦ã€å¯¹è±¡å¼•ç”¨ã€‘ </font>
+ <font style="color:rgb(51,51,51);">æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ d.test4(); æ˜¯é€šè¿‡ã€å¯¹è±¡å¼•ç”¨ã€‘è°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è°ƒç”¨invokestatic ä¹‹å‰æ‰§è¡Œäº† pop æŒ‡ä»¤ï¼ŒæŠŠã€å¯¹è±¡å¼•ç”¨ã€‘ä»æ“ä½œæ•°æ ˆå¼¹æ‰äº†</font><font style="color:rgb(51,51,51);">ğŸ˜‚</font><font style="color:rgb(51,51,51);"> </font>
+ <font style="color:rgb(51,51,51);">è¿˜æœ‰ä¸€ä¸ªæ‰§è¡Œ invokespecial çš„æƒ…å†µæ˜¯é€šè¿‡ super è°ƒç”¨çˆ¶ç±»æ–¹æ³• </font>

# 18. <font style="color:rgb(51,51,51);">10 å¤šæ€çš„åŸç† -HSDB</font>
```java
package cn.itcast.jvm.t3.bytecode; 

import java.io.IOException; 

/** 
* æ¼”ç¤ºå¤šæ€åŸç†ï¼Œæ³¨æ„åŠ ä¸Šä¸‹é¢çš„ JVM å‚æ•°ï¼Œç¦ç”¨æŒ‡é’ˆå‹ç¼© 
* -XX:-UseCompressedOops -XX:-UseCompressedClassPointers 
*/ 
public class Demo3_10 { 
    public static void test(Animal animal) { 
        animal.eat(); 
        System.out.println(animal.toString()); 
    } 
    
    public static void main(String[] args) throws IOException { 
        test(new Cat()); 
        test(new Dog()); 
        System.in.read(); 
    } 
} 

abstract class Animal { 
    public abstract void eat(); 
    
    @Override 
    public String toString() { 
        return "æˆ‘æ˜¯" + this.getClass().getSimpleName(); 
    } 
} 

class Dog extends Animal { 
    
    @Override 
    public void eat() { 
        System.out.println("å•ƒéª¨å¤´"); 
    } 
} 

class Cat extends Animal { 
    
    @Override 
    public void eat() { 
        System.out.println("åƒé±¼"); 
    } 
}
```

**<font style="color:rgb(51,51,51);">1ï¼‰è¿è¡Œä»£ç  </font>**

<font style="color:rgb(51,51,51);">åœåœ¨ </font>`<font style="color:rgb(51,51,51);">System.in.read()</font>`<font style="color:rgb(51,51,51);">æ–¹æ³•ä¸Šï¼Œè¿™æ—¶è¿è¡Œ </font>`<font style="color:rgb(51,51,51);">jps</font>`<font style="color:rgb(51,51,51);"> è·å–è¿›ç¨‹ id </font>

![](images/292.png)

**<font style="color:rgb(51,51,51);">2</font>****<font style="color:rgb(51,51,51);">ï¼‰è¿è¡Œ</font>****<font style="color:rgb(51,51,51);"> HSDB </font>****<font style="color:rgb(51,51,51);">å·¥å…· </font>**

<font style="color:rgb(51,51,51);">è¿›å…¥ JDK å®‰è£…ç›®å½•ï¼Œæ‰§è¡Œ   </font>

```java
java -cp ./lib/sa-jdi.jar sun.jvm.hotspot.HSDB
```

<font style="color:rgb(51,51,51);">è¿›å…¥å›¾å½¢ç•Œé¢ attach è¿›ç¨‹ id  </font>

![](images/293.png)

**<font style="color:rgb(51,51,51);">3</font>****<font style="color:rgb(51,51,51);">ï¼‰æŸ¥æ‰¾æŸä¸ªå¯¹è±¡ </font>**

<font style="color:rgb(51,51,51);">æ‰“å¼€ </font>`<font style="color:rgb(51,51,51);">Tools</font>`<font style="color:rgb(51,51,51);"> -> </font>`<font style="color:rgb(51,51,51);">Find Object By Query</font>`<font style="color:rgb(51,51,51);"> </font>

<font style="color:rgb(51,51,51);">è¾“å…¥ </font>`<font style="color:rgb(51,51,51);">select d from cn.itcast.jvm.t3.bytecode.Dog d</font>`<font style="color:rgb(51,51,51);"> ç‚¹å‡» Execute æ‰§è¡Œ </font>

![](images/294.png)

**<font style="color:rgb(51,51,51);">4</font>****<font style="color:rgb(51,51,51);">ï¼‰æŸ¥çœ‹å¯¹è±¡å†…å­˜ç»“æ„ </font>**

<font style="color:rgb(51,51,51);">ç‚¹å‡»è¶…é“¾æ¥å¯ä»¥çœ‹åˆ°å¯¹è±¡çš„å†…å­˜ç»“æ„ï¼Œæ­¤å¯¹è±¡æ²¡æœ‰ä»»ä½•å±æ€§ï¼Œå› æ­¤åªæœ‰å¯¹è±¡å¤´çš„ 16 å­—èŠ‚ï¼Œå‰ 8 å­—èŠ‚æ˜¯ MarkWordï¼Œå 8 å­—èŠ‚å°±æ˜¯å¯¹è±¡çš„ Class æŒ‡é’ˆï¼Œç›®å‰çœ‹ä¸åˆ°å®ƒçš„å®é™…åœ°å€ </font>

![](images/295.png)

<font style="color:rgb(51,51,51);"></font>**<font style="color:rgb(51,51,51);">5ï¼‰æŸ¥çœ‹å¯¹è±¡ Class çš„å†…å­˜åœ°å€ </font>**

<font style="color:rgb(51,51,51);">å¯ä»¥é€šè¿‡ Windows -> Console è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‰§è¡Œ</font>

```java
mem 0x00000001294f93c8 2
```

<font style="color:rgb(51,51,51);">mem </font><font style="color:rgb(51,51,51);">æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‚æ•°</font><font style="color:rgb(51,51,51);"> 1 </font><font style="color:rgb(51,51,51);">æ˜¯å¯¹è±¡åœ°å€ï¼Œå‚æ•°</font><font style="color:rgb(51,51,51);"> 2 </font><font style="color:rgb(51,51,51);">æ˜¯æŸ¥çœ‹</font><font style="color:rgb(51,51,51);"> 2 </font><font style="color:rgb(51,51,51);">è¡Œï¼ˆå³</font><font style="color:rgb(51,51,51);"> 16 </font><font style="color:rgb(51,51,51);">å­—èŠ‚ï¼‰ </font>

<font style="color:rgb(51,51,51);">ç»“æœä¸­ç¬¬äºŒè¡Œ</font><font style="color:rgb(51,51,51);"> 0x000000001b7d4028 </font><font style="color:rgb(51,51,51);">å³ä¸º</font><font style="color:rgb(51,51,51);"> Class </font><font style="color:rgb(51,51,51);">çš„å†…å­˜åœ°å€ </font>

![](images/296.png)

**<font style="color:rgb(51,51,51);">6</font>****<font style="color:rgb(51,51,51);">ï¼‰æŸ¥çœ‹ç±»çš„</font>****<font style="color:rgb(51,51,51);"> vtable </font>**

+ <font style="color:rgb(51,51,51);">æ–¹æ³•1ï¼šAlt+R è¿›å…¥ Inspector å·¥å…·ï¼Œè¾“å…¥åˆšæ‰çš„ Class å†…å­˜åœ°å€ï¼Œçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ </font>

![](images/297.png)

+ <font style="color:rgb(51,51,51);">æ–¹æ³•2ï¼šæˆ–è€… Tools -> Class Browser è¾“å…¥ Dog æŸ¥æ‰¾ï¼Œå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœ </font>

![](images/298.png)

<font style="color:rgb(51,51,51);">æ— è®ºé€šè¿‡å“ªç§æ–¹æ³•ï¼Œéƒ½å¯ä»¥æ‰¾åˆ° Dog Class çš„ vtable é•¿åº¦ä¸º 6ï¼Œæ„æ€å°±æ˜¯ Dog ç±»æœ‰ 6 ä¸ªè™šæ–¹æ³•ï¼ˆå¤šæ€ç›¸å…³çš„ï¼Œfifinalï¼Œstatic ä¸ä¼šåˆ—å…¥ï¼‰ </font>

![](images/299.png)

<font style="color:rgb(51,51,51);">é‚£ä¹ˆè¿™ 6 ä¸ªæ–¹æ³•éƒ½æ˜¯è°å‘¢ï¼Ÿä» Class çš„èµ·å§‹åœ°å€å¼€å§‹ç®—ï¼Œåç§» 0x1b8 å°±æ˜¯ vtable çš„èµ·å§‹åœ°å€ï¼ˆå‰é¢çš„</font>0x000000001b7d4ä¿æŒä¸å˜<font style="color:rgb(51,51,51);">ï¼‰ï¼Œè¿›è¡Œè®¡ç®—å¾—åˆ°ï¼š </font>

```java
0x000000001b7d4028 
			   1b8 + 
--------------------- 
0x000000001b7d41e0
```

![](images/300.png)

<font style="color:rgb(51,51,51);">é€šè¿‡ Windows -> Console è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‰§è¡Œ </font>

```java
mem 0x000000001b7d41e0 6 
0x000000001b7d41e0: 0x000000001b3d1b10 
0x000000001b7d41e8: 0x000000001b3d15e8 
0x000000001b7d41f0: 0x000000001b7d35e8 
0x000000001b7d41f8: 0x000000001b3d1540 
0x000000001b7d4200: 0x000000001b3d1678 
0x000000001b7d4208: 0x000000001b7d3fa8 
```

<font style="color:rgb(51,51,51);">å°±å¾—åˆ°äº†</font><font style="color:rgb(51,51,51);"> 6 </font><font style="color:rgb(51,51,51);">ä¸ªè™šæ–¹æ³•çš„å…¥å£åœ°å€ </font>

**<font style="color:rgb(51,51,51);">7</font>****<font style="color:rgb(51,51,51);">ï¼‰éªŒè¯æ–¹æ³•åœ°å€ </font>**

<font style="color:rgb(51,51,51);">é€šè¿‡</font><font style="color:rgb(51,51,51);"> Tools -> Class Browser </font><font style="color:rgb(51,51,51);">æŸ¥çœ‹æ¯ä¸ªç±»çš„æ–¹æ³•å®šä¹‰ï¼Œæ¯”è¾ƒå¯çŸ¥ </font>

```java
Dog - public void eat() @0x000000001b7d3fa8 
Animal - public java.lang.String toString() @0x000000001b7d35e8; 
Object - protected void finalize() @0x000000001b3d1b10; 
Object - public boolean equals(java.lang.Object) @0x000000001b3d15e8; 
Object - public native int hashCode() @0x000000001b3d1540; 
Object - protected native java.lang.Object clone() @0x000000001b3d1678;
```

<font style="color:rgb(51,51,51);">å¯¹å·å…¥åº§ï¼Œå‘ç° </font>

+ <font style="color:rgb(51,51,51);">eat() æ–¹æ³•æ˜¯ Dog ç±»è‡ªå·±çš„ </font>
+ <font style="color:rgb(51,51,51);">toString() æ–¹æ³•æ˜¯ç»§æ‰¿ String ç±»çš„ </font>
+ <font style="color:rgb(51,51,51);">fifinalize() ï¼Œequals()ï¼ŒhashCode()ï¼Œclone() éƒ½æ˜¯ç»§æ‰¿ Object ç±»çš„ </font>

**<font style="color:rgb(51,51,51);">8</font>****<font style="color:rgb(51,51,51);">ï¼‰å°ç»“ </font>**

<font style="color:rgb(51,51,51);">å½“æ‰§è¡Œ invokevirtual æŒ‡ä»¤æ—¶ï¼š</font>

1. <font style="color:rgb(51,51,51);">å…ˆé€šè¿‡æ ˆå¸§ä¸­çš„å¯¹è±¡å¼•ç”¨æ‰¾åˆ°å¯¹è±¡ </font>
2. <font style="color:rgb(51,51,51);">åˆ†æå¯¹è±¡å¤´ï¼Œæ‰¾åˆ°å¯¹è±¡çš„å®é™… Class </font>
3. <font style="color:rgb(51,51,51);">Class ç»“æ„ä¸­æœ‰ vtableï¼Œå®ƒåœ¨ç±»åŠ è½½çš„é“¾æ¥é˜¶æ®µå°±å·²ç»æ ¹æ®æ–¹æ³•çš„é‡å†™è§„åˆ™ç”Ÿæˆå¥½äº† </font>
4. <font style="color:rgb(51,51,51);">æŸ¥è¡¨å¾—åˆ°æ–¹æ³•çš„å…·ä½“åœ°å€ </font>
5. <font style="color:rgb(51,51,51);">æ‰§è¡Œæ–¹æ³•çš„å­—èŠ‚ç  </font>

# 19. <font style="color:rgb(51,51,51);">11 å¼‚å¸¸å¤„ç† </font>
**<font style="color:rgb(51,51,51);">1ï¼‰try-catch </font>**

```java
public class Demo3_11_1 { 
    public static void main(String[] args) { 
        int i = 0; 
        try { 
            i = 10; 
        } catch (Exception e) { 
            i = 20; 
        } 
    } 
} 
```

**<font style="color:rgb(119,119,119);">æ³¨æ„ </font>**

<font style="color:rgb(119,119,119);">ä¸ºäº†æŠ“ä½é‡ç‚¹ï¼Œä¸‹é¢çš„å­—èŠ‚ç çœç•¥äº†ä¸é‡è¦çš„éƒ¨åˆ† </font>

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_11_1.java    //åŠ ä¸Š-gå¯ç”Ÿæˆæ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨java -helpæŸ¥çœ‹
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_11_1.class 
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_11_1.class
  Last modified 2022-10-26; size 591 bytes
  MD5 checksum d93c9bf6a3afb6bcc6b898dee986b4f7
  Compiled from "Demo3_11_1.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_11_1
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #4.#25         // java/lang/Object."<init>":()V
   #2 = Class              #26            // java/lang/Exception
   #3 = Class              #27            // cn/itcast/jvm/t3/bytecode/Demo3_11_1
   #4 = Class              #28            // java/lang/Object
   #5 = Utf8               <init>
   #6 = Utf8               ()V
   #7 = Utf8               Code
   #8 = Utf8               LineNumberTable
   #9 = Utf8               LocalVariableTable
  #10 = Utf8               this
  #11 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_11_1;
  #12 = Utf8               main
  #13 = Utf8               ([Ljava/lang/String;)V
  #14 = Utf8               e
  #15 = Utf8               Ljava/lang/Exception;
  #16 = Utf8               args
  #17 = Utf8               [Ljava/lang/String;
  #18 = Utf8               i
  #19 = Utf8               I
  #20 = Utf8               StackMapTable
  #21 = Class              #17            // "[Ljava/lang/String;"
  #22 = Class              #26            // java/lang/Exception
  #23 = Utf8               SourceFile
  #24 = Utf8               Demo3_11_1.java
  #25 = NameAndType        #5:#6          // "<init>":()V
  #26 = Utf8               java/lang/Exception
  #27 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_11_1
  #28 = Utf8               java/lang/Object
{
  public cn.itcast.jvm.t3.bytecode.Demo3_11_1();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_11_1;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=3, args_size=1
         0: iconst_0
         1: istore_1
         2: bipush        10
         4: istore_1
         5: goto          12
         8: astore_2			//æŸ¥çœ‹ä¸‹é¢å±€éƒ¨å˜é‡è¡¨çš„æ§½ä½ï¼Œå‘ç°2å·æ˜¯Exception
         9: bipush        20
        11: istore_1
        12: return
      Exception table:
         from    to  target type
             2     5     8   Class java/lang/Exception  //æ£€æµ‹2ï½5çš„æŒ‡ä»¤ï¼ŒåŒ…å¤´ä¸åŒ…å°¾
      LineNumberTable:
        line 5: 0
        line 7: 2
        line 10: 5
        line 8: 8
        line 9: 9
        line 11: 12
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            9       3     2     e   Ljava/lang/Exception;
            0      13     0  args   [Ljava/lang/String;
            2      11     1     i   I
      StackMapTable: number_of_entries = 2
        frame_type = 255 /* full_frame */
          offset_delta = 8
          locals = [ class "[Ljava/lang/String;", int ]
          stack = [ class java/lang/Exception ]
        frame_type = 3 /* same */
}

```

+ <font style="color:rgb(51,51,51);">å¯ä»¥çœ‹åˆ°å¤šå‡ºæ¥ä¸€ä¸ª Exception table çš„ç»“æ„ï¼Œ[from, to) æ˜¯å‰é—­åå¼€çš„æ£€æµ‹èŒƒå›´ï¼Œä¸€æ—¦è¿™ä¸ªèŒƒå›´å†…çš„å­—èŠ‚ç æ‰§è¡Œå‡ºç°å¼‚å¸¸ï¼Œåˆ™é€šè¿‡ type åŒ¹é…å¼‚å¸¸ç±»å‹ï¼Œå¦‚æœä¸€è‡´ï¼Œè¿›å…¥ target æ‰€æŒ‡ç¤ºè¡Œå· </font>
+ <font style="color:rgb(51,51,51);">8 è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ astore_2 æ˜¯å°†å¼‚å¸¸å¯¹è±¡å¼•ç”¨å­˜å…¥å±€éƒ¨å˜é‡è¡¨çš„ slot 2 ä½ç½® </font>

**<font style="color:rgb(51,51,51);">2ï¼‰å¤šä¸ª single-catch å—çš„æƒ…å†µ </font>**

```java
public class Demo3_11_2 { 
    public static void main(String[] args) { 
        int i = 0; 
        try {
            i = 10; 
        } catch (ArithmeticException e) { 
            i = 30; 
        } catch (NullPointerException e) { 
            i = 40; 
        } catch (Exception e) { 
            i = 50; 
        } 
    } 
} 
```

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_11_2.java 
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_11_2.class
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_11_2.class
  Last modified 2022-10-26; size 819 bytes
  MD5 checksum b3e86e537320605dff95d34fe9ea4537
  Compiled from "Demo3_11_2.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_11_2
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #6.#31         // java/lang/Object."<init>":()V
   #2 = Class              #32            // java/lang/ArithmeticException
   #3 = Class              #33            // java/lang/NullPointerException
   #4 = Class              #34            // java/lang/Exception
   #5 = Class              #35            // cn/itcast/jvm/t3/bytecode/Demo3_11_2
   #6 = Class              #36            // java/lang/Object
   #7 = Utf8               <init>
   #8 = Utf8               ()V
   #9 = Utf8               Code
  #10 = Utf8               LineNumberTable
  #11 = Utf8               LocalVariableTable
  #12 = Utf8               this
  #13 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_11_2;
  #14 = Utf8               main
  #15 = Utf8               ([Ljava/lang/String;)V
  #16 = Utf8               e
  #17 = Utf8               Ljava/lang/ArithmeticException;
  #18 = Utf8               Ljava/lang/NullPointerException;
  #19 = Utf8               Ljava/lang/Exception;
  #20 = Utf8               args
  #21 = Utf8               [Ljava/lang/String;
  #22 = Utf8               i
  #23 = Utf8               I
  #24 = Utf8               StackMapTable
  #25 = Class              #21            // "[Ljava/lang/String;"
  #26 = Class              #32            // java/lang/ArithmeticException
  #27 = Class              #33            // java/lang/NullPointerException
  #28 = Class              #34            // java/lang/Exception
  #29 = Utf8               SourceFile
  #30 = Utf8               Demo3_11_2.java
  #31 = NameAndType        #7:#8          // "<init>":()V
  #32 = Utf8               java/lang/ArithmeticException
  #33 = Utf8               java/lang/NullPointerException
  #34 = Utf8               java/lang/Exception
  #35 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_11_2
  #36 = Utf8               java/lang/Object
{
  public cn.itcast.jvm.t3.bytecode.Demo3_11_2();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_11_2;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=3, args_size=1
         0: iconst_0
         1: istore_1
         2: bipush        10
         4: istore_1
         5: goto          26
         8: astore_2
         9: bipush        30
        11: istore_1
        12: goto          26
        15: astore_2
        16: bipush        40
        18: istore_1
        19: goto          26
        22: astore_2
        23: bipush        50
        25: istore_1
        26: return
      Exception table:
         from    to  target type
             2     5     8   Class java/lang/ArithmeticException
             2     5    15   Class java/lang/NullPointerException
             2     5    22   Class java/lang/Exception
      LineNumberTable:
        line 5: 0
        line 7: 2
        line 14: 5
        line 8: 8
        line 9: 9
        line 14: 12
        line 10: 15
        line 11: 16
        line 14: 19
        line 12: 22
        line 13: 23
        line 15: 26
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            9       3     2     e   Ljava/lang/ArithmeticException;
           16       3     2     e   Ljava/lang/NullPointerException;
           23       3     2     e   Ljava/lang/Exception;
            0      27     0  args   [Ljava/lang/String;
            2      25     1     i   I
      StackMapTable: number_of_entries = 4
        frame_type = 255 /* full_frame */
          offset_delta = 8
          locals = [ class "[Ljava/lang/String;", int ]
          stack = [ class java/lang/ArithmeticException ]
        frame_type = 70 /* same_locals_1_stack_item */
          stack = [ class java/lang/NullPointerException ]
        frame_type = 70 /* same_locals_1_stack_item */
          stack = [ class java/lang/Exception ]
        frame_type = 3 /* same */
}

```

<font style="color:rgb(51,51,51);">å› ä¸ºå¼‚å¸¸å‡ºç°æ—¶ï¼Œåªèƒ½è¿›å…¥ Exception table ä¸­ä¸€ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥å±€éƒ¨å˜é‡è¡¨ slot 2 ä½ç½®è¢«å…±ç”¨ </font>

**<font style="color:rgb(51,51,51);"></font>**

**<font style="color:rgb(51,51,51);">3ï¼‰multi-catch çš„æƒ…å†µ </font>**

```java
public class Demo3_11_3 {
    public static void main(String[] args) { 
        try { 
            Method test = Demo3_11_3.class.getMethod("test"); 
            test.invoke(null); 
        } catch (NoSuchMethodException | IllegalAccessException | 
                 InvocationTargetException e) { 
            e.printStackTrace(); 
        } 
    } 
    public static void test() { 
        System.out.println("ok"); 
    } 
} 
```

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_11_3.java
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_11_3.class
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_11_3.class
  Last modified 2022-10-26; size 1242 bytes
  MD5 checksum 0fc0954f0359722e47df8b0513bc16a8
  Compiled from "Demo3_11_3.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_11_3
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #6.#34         // java/lang/Object."<init>":()V
   #2 = Class              #35            // cn/itcast/jvm/t3/bytecode/Demo3_11_3
   #3 = String             #24            // test
   #4 = Class              #36            // java/lang/Class
   #5 = Methodref          #4.#37         // java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
   #6 = Class              #38            // java/lang/Object
   #7 = Methodref          #39.#40        // java/lang/reflect/Method.invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
   #8 = Class              #41            // java/lang/NoSuchMethodException
   #9 = Class              #42            // java/lang/IllegalAccessException
  #10 = Class              #43            // java/lang/reflect/InvocationTargetException
  #11 = Methodref          #44.#45        // java/lang/ReflectiveOperationException.printStackTrace:()V
  #12 = Fieldref           #46.#47        // java/lang/System.out:Ljava/io/PrintStream;
  #13 = String             #48            // ok
  #14 = Methodref          #49.#50        // java/io/PrintStream.println:(Ljava/lang/String;)V
  #15 = Utf8               <init>
  #16 = Utf8               ()V
  #17 = Utf8               Code
  #18 = Utf8               LineNumberTable
  #19 = Utf8               LocalVariableTable
  #20 = Utf8               this
  #21 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_11_3;
  #22 = Utf8               main
  #23 = Utf8               ([Ljava/lang/String;)V
  #24 = Utf8               test
  #25 = Utf8               Ljava/lang/reflect/Method;
  #26 = Utf8               e
  #27 = Utf8               Ljava/lang/ReflectiveOperationException;
  #28 = Utf8               args
  #29 = Utf8               [Ljava/lang/String;
  #30 = Utf8               StackMapTable
  #31 = Class              #51            // java/lang/ReflectiveOperationException
  #32 = Utf8               SourceFile
  #33 = Utf8               Demo3_11_3.java
  #34 = NameAndType        #15:#16        // "<init>":()V
  #35 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_11_3
  #36 = Utf8               java/lang/Class
  #37 = NameAndType        #52:#53        // getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
  #38 = Utf8               java/lang/Object
  #39 = Class              #54            // java/lang/reflect/Method
  #40 = NameAndType        #55:#56        // invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
  #41 = Utf8               java/lang/NoSuchMethodException
  #42 = Utf8               java/lang/IllegalAccessException
  #43 = Utf8               java/lang/reflect/InvocationTargetException
  #44 = Class              #51            // java/lang/ReflectiveOperationException
  #45 = NameAndType        #57:#16        // printStackTrace:()V
  #46 = Class              #58            // java/lang/System
  #47 = NameAndType        #59:#60        // out:Ljava/io/PrintStream;
  #48 = Utf8               ok
  #49 = Class              #61            // java/io/PrintStream
  #50 = NameAndType        #62:#63        // println:(Ljava/lang/String;)V
  #51 = Utf8               java/lang/ReflectiveOperationException
  #52 = Utf8               getMethod
  #53 = Utf8               (Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
  #54 = Utf8               java/lang/reflect/Method
  #55 = Utf8               invoke
  #56 = Utf8               (Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
  #57 = Utf8               printStackTrace
  #58 = Utf8               java/lang/System
  #59 = Utf8               out
  #60 = Utf8               Ljava/io/PrintStream;
  #61 = Utf8               java/io/PrintStream
  #62 = Utf8               println
  #63 = Utf8               (Ljava/lang/String;)V
{
  public cn.itcast.jvm.t3.bytecode.Demo3_11_3();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 6: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_11_3;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=3, locals=2, args_size=1
         0: ldc           #2                  // class cn/itcast/jvm/t3/bytecode/Demo3_11_3
         2: ldc           #3                  // String test
         4: iconst_0
         5: anewarray     #4                  // class java/lang/Class
         8: invokevirtual #5                  // Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
        11: astore_1
        12: aload_1
        13: aconst_null
        14: iconst_0
        15: anewarray     #6                  // class java/lang/Object
        18: invokevirtual #7                  // Method java/lang/reflect/Method.invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
        21: pop
        22: goto          30
        25: astore_1
        26: aload_1
        27: invokevirtual #11                 // Method java/lang/ReflectiveOperationException.printStackTrace:()V
        30: return
      Exception table:
         from    to  target type
             0    22    25   Class java/lang/NoSuchMethodException
             0    22    25   Class java/lang/IllegalAccessException
             0    22    25   Class java/lang/reflect/InvocationTargetException
      LineNumberTable:
        line 9: 0
        line 10: 12
        line 14: 22
        line 11: 25
        line 13: 26
        line 15: 30
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
           12      10     1  test   Ljava/lang/reflect/Method;
           26       4     1     e   Ljava/lang/ReflectiveOperationException;
            0      31     0  args   [Ljava/lang/String;
      StackMapTable: number_of_entries = 2
        frame_type = 89 /* same_locals_1_stack_item */
          stack = [ class java/lang/ReflectiveOperationException ]
        frame_type = 4 /* same */

  public static void test();
    descriptor: ()V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=0, args_size=0
         0: getstatic     #12                 // Field java/lang/System.out:Ljava/io/PrintStream;
         3: ldc           #13                 // String ok
         5: invokevirtual #14                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
         8: return
      LineNumberTable:
        line 17: 0
        line 18: 8
}

```

**<font style="color:rgb(51,51,51);">4ï¼‰finally </font>**

```java
public class Demo3_11_4 { 
    public static void main(String[] args) { 
        int i = 0; 
        try { 
            i = 10; 
        } catch (Exception e) { 
            i = 20; 
        } finally { 
            i = 30; 
        } 
    } 
} 
```

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_11_4.java 
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_11_4.class
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_11_4.class
  Last modified 2022-10-26; size 671 bytes
  MD5 checksum 021fd81f785ea35eb5fc8d4d3c50ab3c
  Compiled from "Demo3_11_4.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_11_4
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #4.#26         // java/lang/Object."<init>":()V
   #2 = Class              #27            // java/lang/Exception
   #3 = Class              #28            // cn/itcast/jvm/t3/bytecode/Demo3_11_4
   #4 = Class              #29            // java/lang/Object
   #5 = Utf8               <init>
   #6 = Utf8               ()V
   #7 = Utf8               Code
   #8 = Utf8               LineNumberTable
   #9 = Utf8               LocalVariableTable
  #10 = Utf8               this
  #11 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_11_4;
  #12 = Utf8               main
  #13 = Utf8               ([Ljava/lang/String;)V
  #14 = Utf8               e
  #15 = Utf8               Ljava/lang/Exception;
  #16 = Utf8               args
  #17 = Utf8               [Ljava/lang/String;
  #18 = Utf8               i
  #19 = Utf8               I
  #20 = Utf8               StackMapTable
  #21 = Class              #17            // "[Ljava/lang/String;"
  #22 = Class              #27            // java/lang/Exception
  #23 = Class              #30            // java/lang/Throwable
  #24 = Utf8               SourceFile
  #25 = Utf8               Demo3_11_4.java
  #26 = NameAndType        #5:#6          // "<init>":()V
  #27 = Utf8               java/lang/Exception
  #28 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_11_4
  #29 = Utf8               java/lang/Object
  #30 = Utf8               java/lang/Throwable
{
  public cn.itcast.jvm.t3.bytecode.Demo3_11_4();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_11_4;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=4, args_size=1
         0: iconst_0
         1: istore_1
         2: bipush        10
         4: istore_1
         5: bipush        30
         7: istore_1
         8: goto          27
        11: astore_2
        12: bipush        20
        14: istore_1
        15: bipush        30
        17: istore_1
        18: goto          27
        21: astore_3
        22: bipush        30
        24: istore_1
        25: aload_3
        26: athrow
        27: return
      Exception table:
         from    to  target type
             2     5    11   Class java/lang/Exception
             2     5    21   any		//å‰©ä½™çš„å¼‚å¸¸ç±»å‹ï¼Œæ¯”å¦‚Error
            11    15    21   any		//å‰©ä½™çš„å¼‚å¸¸ç±»å‹ï¼Œæ¯”å¦‚Error
      LineNumberTable:
        line 5: 0
        line 7: 2
        line 11: 5
        line 12: 8
        line 8: 11
        line 9: 12
        line 11: 15
        line 12: 18
        line 11: 21
        line 12: 25
        line 13: 27
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
           12       3     2     e   Ljava/lang/Exception;
            0      28     0  args   [Ljava/lang/String;
            2      26     1     i   I
      StackMapTable: number_of_entries = 3
        frame_type = 255 /* full_frame */
          offset_delta = 11
          locals = [ class "[Ljava/lang/String;", int ]
          stack = [ class java/lang/Exception ]
        frame_type = 73 /* same_locals_1_stack_item */
          stack = [ class java/lang/Throwable ]
        frame_type = 5 /* same */
}
```

<font style="color:rgb(51,51,51);">å¯ä»¥çœ‹åˆ° finally ä¸­çš„ä»£ç è¢«å¤åˆ¶äº† 3 ä»½ï¼Œåˆ†åˆ«æ”¾å…¥ try æµç¨‹ï¼Œcatch æµç¨‹ä»¥åŠ catch å‰©ä½™çš„å¼‚å¸¸ç±»å‹æµ ç¨‹ </font>

# 20. <font style="color:rgb(51,51,51);">12 ç»ƒä¹ -finally é¢è¯•é¢˜ </font>
**<font style="color:rgb(51,51,51);">1ï¼‰finally å‡ºç°äº† return </font>**

<font style="color:rgb(51,51,51);">å…ˆé—®é—®è‡ªå·±ï¼Œä¸‹é¢çš„é¢˜ç›®è¾“å‡ºä»€ä¹ˆï¼Ÿ </font>

```java
public class Demo3_12_2 { 
    public static void main(String[] args) { 
        int result = test(); 
        System.out.println(result); 
    } 
    public static int test() { 
        try { 
            return 10; 
        } finally { 
            return 20; 
        } 
    } 
} 
```

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_12_2.java 
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_12_2.class
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_12_2.class
  Last modified 2022-10-26; size 717 bytes
  MD5 checksum 165f77189e75085b6471154bc5b40c64
  Compiled from "Demo3_12_2.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_12_2
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #6.#26         // java/lang/Object."<init>":()V
   #2 = Methodref          #5.#27         // cn/itcast/jvm/t3/bytecode/Demo3_12_2.test:()I
   #3 = Fieldref           #28.#29        // java/lang/System.out:Ljava/io/PrintStream;
   #4 = Methodref          #30.#31        // java/io/PrintStream.println:(I)V
   #5 = Class              #32            // cn/itcast/jvm/t3/bytecode/Demo3_12_2
   #6 = Class              #33            // java/lang/Object
   #7 = Utf8               <init>
   #8 = Utf8               ()V
   #9 = Utf8               Code
  #10 = Utf8               LineNumberTable
  #11 = Utf8               LocalVariableTable
  #12 = Utf8               this
  #13 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_12_2;
  #14 = Utf8               main
  #15 = Utf8               ([Ljava/lang/String;)V
  #16 = Utf8               args
  #17 = Utf8               [Ljava/lang/String;
  #18 = Utf8               result
  #19 = Utf8               I
  #20 = Utf8               test
  #21 = Utf8               ()I
  #22 = Utf8               StackMapTable
  #23 = Class              #34            // java/lang/Throwable
  #24 = Utf8               SourceFile
  #25 = Utf8               Demo3_12_2.java
  #26 = NameAndType        #7:#8          // "<init>":()V
  #27 = NameAndType        #20:#21        // test:()I
  #28 = Class              #35            // java/lang/System
  #29 = NameAndType        #36:#37        // out:Ljava/io/PrintStream;
  #30 = Class              #38            // java/io/PrintStream
  #31 = NameAndType        #39:#40        // println:(I)V
  #32 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_12_2
  #33 = Utf8               java/lang/Object
  #34 = Utf8               java/lang/Throwable
  #35 = Utf8               java/lang/System
  #36 = Utf8               out
  #37 = Utf8               Ljava/io/PrintStream;
  #38 = Utf8               java/io/PrintStream
  #39 = Utf8               println
  #40 = Utf8               (I)V
{
  public cn.itcast.jvm.t3.bytecode.Demo3_12_2();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_12_2;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=2, args_size=1
         0: invokestatic  #2                  // Method test:()I
         3: istore_1
         4: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;
         7: iload_1
         8: invokevirtual #4                  // Method java/io/PrintStream.println:(I)V
        11: return
      LineNumberTable:
        line 5: 0
        line 6: 4
        line 7: 11
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      12     0  args   [Ljava/lang/String;
            4       8     1 result   I

  public static int test();
    descriptor: ()I
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=2, args_size=0
         0: bipush        10	// <- 10 æ”¾å…¥æ ˆé¡¶
         2: istore_0			// 10 -> slot 0 (ä»æ ˆé¡¶ç§»é™¤äº†)
         3: bipush        20	// <- 20 æ”¾å…¥æ ˆé¡¶
         5: ireturn				// è¿”å›æ ˆé¡¶ int(20)
         6: astore_1			// catch any -> slot 1
         7: bipush        20	// <- 20 æ”¾å…¥æ ˆé¡¶
         9: ireturn				// è¿”å›æ ˆé¡¶ int(20)
      Exception table:
         from    to  target type
             0     3     6   any
      LineNumberTable:
        line 10: 0
        line 12: 3
      StackMapTable: number_of_entries = 1
        frame_type = 70 /* same_locals_1_stack_item */
          stack = [ class java/lang/Throwable ]
}

```

+ <font style="color:rgb(51,51,51);">ç”±äº finally ä¸­çš„ ireturn è¢«æ’å…¥äº†æ‰€æœ‰å¯èƒ½çš„æµç¨‹ï¼Œå› æ­¤è¿”å›ç»“æœè‚¯å®šä»¥ finally çš„ä¸ºå‡† </font>
+ <font style="color:rgb(51,51,51);">è‡³äºå­—èŠ‚ç ä¸­ç¬¬ 2 è¡Œï¼Œä¼¼ä¹æ²¡å•¥ç”¨ï¼Œä¸”ç•™ä¸ªä¼ç¬”ï¼Œçœ‹ä¸‹ä¸ªä¾‹å­ </font>
+ <font style="color:rgb(51,51,51);">è·Ÿä¸Šä¾‹ä¸­çš„ finally ç›¸æ¯”ï¼Œå‘ç°æ²¡æœ‰ athrow äº†ï¼Œè¿™å‘Šè¯‰æˆ‘ä»¬ï¼šå¦‚æœåœ¨ finally ä¸­å‡ºç°äº† returnï¼Œä¼šåæ‰å¼‚å¸¸</font><font style="color:rgb(51,51,51);">ğŸ˜±ğŸ˜±ğŸ˜±</font><font style="color:rgb(51,51,51);">ï¼Œå¯ä»¥è¯•ä¸€ä¸‹ä¸‹é¢çš„ä»£ç  </font>

```java
public class Demo3_12_1 { 
    public static void main(String[] args) { 
        int result = test(); 
        System.out.println(result); 
    } 
    public static int test() { 
        try {
            int i = 1/0; 
            return 10; 
        } finally { 
            return 20; 
        } 
    } 
} 
```

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_12_1.java 
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_12_1.class
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_12_1.class
  Last modified 2022-10-26; size 747 bytes
  MD5 checksum 641d76b07bc25ee7a8cfbc3ff0de4520
  Compiled from "Demo3_12_1.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_12_1
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #6.#27         // java/lang/Object."<init>":()V
   #2 = Methodref          #5.#28         // cn/itcast/jvm/t3/bytecode/Demo3_12_1.test:()I
   #3 = Fieldref           #29.#30        // java/lang/System.out:Ljava/io/PrintStream;
   #4 = Methodref          #31.#32        // java/io/PrintStream.println:(I)V
   #5 = Class              #33            // cn/itcast/jvm/t3/bytecode/Demo3_12_1
   #6 = Class              #34            // java/lang/Object
   #7 = Utf8               <init>
   #8 = Utf8               ()V
   #9 = Utf8               Code
  #10 = Utf8               LineNumberTable
  #11 = Utf8               LocalVariableTable
  #12 = Utf8               this
  #13 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_12_1;
  #14 = Utf8               main
  #15 = Utf8               ([Ljava/lang/String;)V
  #16 = Utf8               args
  #17 = Utf8               [Ljava/lang/String;
  #18 = Utf8               result
  #19 = Utf8               I
  #20 = Utf8               test
  #21 = Utf8               ()I
  #22 = Utf8               i
  #23 = Utf8               StackMapTable
  #24 = Class              #35            // java/lang/Throwable
  #25 = Utf8               SourceFile
  #26 = Utf8               Demo3_12_1.java
  #27 = NameAndType        #7:#8          // "<init>":()V
  #28 = NameAndType        #20:#21        // test:()I
  #29 = Class              #36            // java/lang/System
  #30 = NameAndType        #37:#38        // out:Ljava/io/PrintStream;
  #31 = Class              #39            // java/io/PrintStream
  #32 = NameAndType        #40:#41        // println:(I)V
  #33 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_12_1
  #34 = Utf8               java/lang/Object
  #35 = Utf8               java/lang/Throwable
  #36 = Utf8               java/lang/System
  #37 = Utf8               out
  #38 = Utf8               Ljava/io/PrintStream;
  #39 = Utf8               java/io/PrintStream
  #40 = Utf8               println
  #41 = Utf8               (I)V
{
  public cn.itcast.jvm.t3.bytecode.Demo3_12_1();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_12_1;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=2, args_size=1
         0: invokestatic  #2                  // Method test:()I
         3: istore_1
         4: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;
         7: iload_1
         8: invokevirtual #4                  // Method java/io/PrintStream.println:(I)V
        11: return
      LineNumberTable:
        line 5: 0
        line 6: 4
        line 7: 11
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      12     0  args   [Ljava/lang/String;
            4       8     1 result   I

  public static int test();
    descriptor: ()I
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=3, args_size=0
         0: iconst_1
         1: iconst_0
         2: idiv
         3: istore_0
         4: bipush        10
         6: istore_1
         7: bipush        20
         9: ireturn
        10: astore_2
        11: bipush        20
        13: ireturn
      Exception table:
         from    to  target type
             0     7    10   any
      LineNumberTable:
        line 10: 0
        line 11: 4
        line 13: 7
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            4       6     0     i   I
      StackMapTable: number_of_entries = 1
        frame_type = 74 /* same_locals_1_stack_item */
          stack = [ class java/lang/Throwable ]
}

```

**<font style="color:rgb(51,51,51);">2ï¼‰finally å¯¹è¿”å›å€¼å½±å“ </font>**

<font style="color:rgb(51,51,51);">åŒæ ·é—®é—®è‡ªå·±ï¼Œä¸‹é¢çš„é¢˜ç›®è¾“å‡ºä»€ä¹ˆï¼Ÿ </font>

```java
public class Demo3_12_2 { 
    public static void main(String[] args) { 
        int result = test(); 
        System.out.println(result); 
    } 
    public static int test() { 
        int i = 10; 
        try { 
            return i; 
        } finally { 
            i = 20; 
        } 
    } 
} //è¾“å‡ºç»“æœä¸º10
```

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_12_3.java 
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_12_3.class
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_12_3.class
  Last modified 2022-10-26; size 768 bytes
  MD5 checksum 15e1c8bdeb351ecb7b922d8feca323e0
  Compiled from "Demo3_12_3.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_12_3
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #6.#27         // java/lang/Object."<init>":()V
   #2 = Methodref          #5.#28         // cn/itcast/jvm/t3/bytecode/Demo3_12_3.test:()I
   #3 = Fieldref           #29.#30        // java/lang/System.out:Ljava/io/PrintStream;
   #4 = Methodref          #31.#32        // java/io/PrintStream.println:(I)V
   #5 = Class              #33            // cn/itcast/jvm/t3/bytecode/Demo3_12_3
   #6 = Class              #34            // java/lang/Object
   #7 = Utf8               <init>
   #8 = Utf8               ()V
   #9 = Utf8               Code
  #10 = Utf8               LineNumberTable
  #11 = Utf8               LocalVariableTable
  #12 = Utf8               this
  #13 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_12_3;
  #14 = Utf8               main
  #15 = Utf8               ([Ljava/lang/String;)V
  #16 = Utf8               args
  #17 = Utf8               [Ljava/lang/String;
  #18 = Utf8               result
  #19 = Utf8               I
  #20 = Utf8               test
  #21 = Utf8               ()I
  #22 = Utf8               i
  #23 = Utf8               StackMapTable
  #24 = Class              #35            // java/lang/Throwable
  #25 = Utf8               SourceFile
  #26 = Utf8               Demo3_12_3.java
  #27 = NameAndType        #7:#8          // "<init>":()V
  #28 = NameAndType        #20:#21        // test:()I
  #29 = Class              #36            // java/lang/System
  #30 = NameAndType        #37:#38        // out:Ljava/io/PrintStream;
  #31 = Class              #39            // java/io/PrintStream
  #32 = NameAndType        #40:#41        // println:(I)V
  #33 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_12_3
  #34 = Utf8               java/lang/Object
  #35 = Utf8               java/lang/Throwable
  #36 = Utf8               java/lang/System
  #37 = Utf8               out
  #38 = Utf8               Ljava/io/PrintStream;
  #39 = Utf8               java/io/PrintStream
  #40 = Utf8               println
  #41 = Utf8               (I)V
{
  public cn.itcast.jvm.t3.bytecode.Demo3_12_3();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_12_3;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=2, args_size=1
         0: invokestatic  #2                  // Method test:()I
         3: istore_1
         4: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;
         7: iload_1
         8: invokevirtual #4                  // Method java/io/PrintStream.println:(I)V
        11: return
      LineNumberTable:
        line 5: 0
        line 6: 4
        line 7: 11
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      12     0  args   [Ljava/lang/String;
            4       8     1 result   I

  public static int test();
    descriptor: ()I
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=1, locals=3, args_size=0
         0: bipush        10	// <- 10 æ”¾å…¥æ ˆé¡¶
         2: istore_0			// 10 -> i
         3: iload_0				// <- i(10)
         4: istore_1			// 10 -> slot 1ï¼Œæš‚å­˜è‡³ slot 1ï¼Œç›®çš„æ˜¯ä¸ºäº†å›ºå®šè¿”å›å€¼
         5: bipush        20	// <- 20 æ”¾å…¥æ ˆé¡¶
         7: istore_0			// 20 -> i
         8: iload_1				// <- slot 1(10) è½½å…¥ slot 1 æš‚å­˜çš„å€¼
         9: ireturn				// è¿”å›æ ˆé¡¶çš„ int(10)
        10: astore_2
        11: bipush        20
        13: istore_0
        14: aload_2
        15: athrow
      Exception table:
         from    to  target type
             3     5    10   any
      LineNumberTable:
        line 9: 0
        line 11: 3
        line 13: 5
        line 11: 8
        line 13: 10
        line 14: 14
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            3      13     0     i   I
      StackMapTable: number_of_entries = 1
        frame_type = 255 /* full_frame */
          offset_delta = 10
          locals = [ int ]
          stack = [ class java/lang/Throwable ]
}

```

æˆ‘ä»¬å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨tryä¸­returnäº†ï¼Œåœ¨finallyé‡Œé¢æ”¹å˜å…¶å€¼ï¼Œæ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œå› ä¸ºå®ƒå¯¹å€¼å¦å¤–åšäº†ä¸€ä»½ä¿å­˜ã€‚åœ¨è¿”å›çš„æ—¶å€™ï¼Œè¿”å›çš„è¿˜æ˜¯æš‚å­˜çš„å€¼ã€‚

# 21. <font style="color:rgb(51,51,51);">13 synchronized </font>
```java
public class Demo3_13 { 
    public static void main(String[] args) { 
        Object lock = new Object(); 
        synchronized (lock) { 
            System.out.println("ok"); 
        } 
    } 
} 
```

```java
admin@admindeMacBook-Pro-4 bytecode % javac -g Demo3_13.java   
admin@admindeMacBook-Pro-4 bytecode % javap -v Demo3_13.class 
Classfile /Users/admin/Desktop/code/mavenTest/src/main/java/cn/itcast/jvm/t3/bytecode/Demo3_13.class
  Last modified 2022-10-26; size 735 bytes
  MD5 checksum ea0db300c257be6630484f51b9cd9fd5
  Compiled from "Demo3_13.java"
public class cn.itcast.jvm.t3.bytecode.Demo3_13
  minor version: 0
  major version: 52
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   #1 = Methodref          #2.#26         // java/lang/Object."<init>":()V
   #2 = Class              #27            // java/lang/Object
   #3 = Fieldref           #28.#29        // java/lang/System.out:Ljava/io/PrintStream;
   #4 = String             #30            // ok
   #5 = Methodref          #31.#32        // java/io/PrintStream.println:(Ljava/lang/String;)V
   #6 = Class              #33            // cn/itcast/jvm/t3/bytecode/Demo3_13
   #7 = Utf8               <init>
   #8 = Utf8               ()V
   #9 = Utf8               Code
  #10 = Utf8               LineNumberTable
  #11 = Utf8               LocalVariableTable
  #12 = Utf8               this
  #13 = Utf8               Lcn/itcast/jvm/t3/bytecode/Demo3_13;
  #14 = Utf8               main
  #15 = Utf8               ([Ljava/lang/String;)V
  #16 = Utf8               args
  #17 = Utf8               [Ljava/lang/String;
  #18 = Utf8               lock
  #19 = Utf8               Ljava/lang/Object;
  #20 = Utf8               StackMapTable
  #21 = Class              #17            // "[Ljava/lang/String;"
  #22 = Class              #27            // java/lang/Object
  #23 = Class              #34            // java/lang/Throwable
  #24 = Utf8               SourceFile
  #25 = Utf8               Demo3_13.java
  #26 = NameAndType        #7:#8          // "<init>":()V
  #27 = Utf8               java/lang/Object
  #28 = Class              #35            // java/lang/System
  #29 = NameAndType        #36:#37        // out:Ljava/io/PrintStream;
  #30 = Utf8               ok
  #31 = Class              #38            // java/io/PrintStream
  #32 = NameAndType        #39:#40        // println:(Ljava/lang/String;)V
  #33 = Utf8               cn/itcast/jvm/t3/bytecode/Demo3_13
  #34 = Utf8               java/lang/Throwable
  #35 = Utf8               java/lang/System
  #36 = Utf8               out
  #37 = Utf8               Ljava/io/PrintStream;
  #38 = Utf8               java/io/PrintStream
  #39 = Utf8               println
  #40 = Utf8               (Ljava/lang/String;)V
{
  public cn.itcast.jvm.t3.bytecode.Demo3_13();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lcn/itcast/jvm/t3/bytecode/Demo3_13;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=4, args_size=1
         0: new           #2                  	// new Object
         3: dup								  	// å¤åˆ¶ä¸€ä»½ï¼Œä¸€ä»½ç”¨äºæ„é€ æ–¹æ³•ï¼Œä¸€ä»½åœ¨ä¸‹é¢ä¼šç”¨åˆ°
         4: invokespecial #1                  	// invokespecial <init>:()V
         7: astore_1						  	// lockå¼•ç”¨ -> lock
         8: aload_1						      	// <- lock ï¼ˆsynchronizedå¼€å§‹ï¼‰
         9: dup
        10: astore_2							// lockå¼•ç”¨ -> slot 2
        11: monitorenter						// monitorenter(lockå¼•ç”¨)
        12: getstatic     #3                	// <- System.out
        15: ldc           #4                  	// <- "ok"
        17: invokevirtual #5                  	// Method java/io/PrintStream.println:(Ljava/lang/String;)V
        20: aload_2								// <- slot 2(lockå¼•ç”¨)
        21: monitorexit							// monitorexit(lockå¼•ç”¨)
        22: goto          30
        25: astore_3							// any -> slot 3   æ•æ‰åˆ°ä¸€åœºï¼Œå­˜å‚¨åˆ°3å·æ§½ä½
        26: aload_2								// <- slot 2(lockå¼•ç”¨)
        27: monitorexit							// monitorexit(lockå¼•ç”¨)
        28: aload_3
        29: athrow
        30: return
      Exception table:
         from    to  target type
            12    22    25   any
            25    28    25   any
      LineNumberTable:
        line 5: 0
        line 6: 8
        line 7: 12
        line 8: 20
        line 9: 30
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      31     0  args   [Ljava/lang/String;
            8      23     1  lock   Ljava/lang/Object;
      StackMapTable: number_of_entries = 2
        frame_type = 255 /* full_frame */
          offset_delta = 25
          locals = [ class "[Ljava/lang/String;", class java/lang/Object, class java/lang/Object ]
          stack = [ class java/lang/Throwable ]
        frame_type = 250 /* chop */
          offset_delta = 4
}

```

**<font style="color:rgb(119,119,119);">æ³¨æ„ï¼š</font>**<font style="color:rgb(119,119,119);">æ–¹æ³•çº§åˆ«çš„ synchronized ä¸ä¼šåœ¨å­—èŠ‚ç æŒ‡ä»¤ä¸­æœ‰æ‰€ä½“ç° </font>



